<%# app/views/user/registrations/new.html.erb -%>
<%-
  # Sign-up (create local account) form.
  #
  # NOTE: This template replaces 'devise/registrations/new'.

  view_debug(__FILE__)

  # TODO: Send an invite with a link including an encrypted token and only show this page if a valid token is presented.

  user  ||= resource
  dec     = UserDecorator.new(user, **context(:new))

  title ||= dec.page_heading(default: nil)
  title ||= dec.page_meta_title(default: 'Sign up')
  help  ||= nil # dec.help_topic

  unless modal?
    label = dec.page_meta_title(default: title)
    set_page_meta_title(label)
    set_page_description(title)
    set_page_robots(:noindex, :nofollow)
  end

-%>

<%= page_heading(title, help: help) %>

<%= page_description_section %>
<%= render 'devise/shared/error_messages', resource: user %>

<%= page_directions_section %>
<%= dec.model_form %>

<%= page_notes_section %>
