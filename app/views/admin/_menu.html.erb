<%# app/views/admin/_menu.html.erb -%>
<%-
  # Administration pages menu.

  view_debug(__FILE__)

  level ||= 3

  outer = (level < 3) ? :div : :ul
  inner = (level < 3) ? :div : :li
  pages = [:index, *AdminController::PAGES]
  links =
    pages.map { |page|
      next if page.to_s == params['action']
      html_tag(inner, class: 'page-action') {
        path   = get_path_for(:admin, page)
        label  = t("emma.admin.#{page}.label",   default: path)
        note   = t("emma.admin.#{page}.tooltip", default: nil)
        note &&= h(note.delete_suffix('.'))
        link_to(label, path, class: 'link') << html_div(note, class: 'note')
      }
    }.compact

-%>

<%= html_tag(outer, links, class: 'page-actions', role: 'navigation') %>
