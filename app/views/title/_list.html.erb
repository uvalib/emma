<%# app/views/title/_list.html.erb -%>
<%-
  # A sequence of catalog Title entries.

  view_debug(__FILE__)

  list   ||= nil
  dec    ||= TitlesDecorator.new(list, **context)
  list   ||= dec.object

  count  ||= list.size
  offset ||= @page.page_offset
  level  ||= 1
  row    ||= level
  skip   ||= nil

  skip    = [*skip]
  heading =
    unless skip.include?(:title)
      title ||= nil
      title   = dec.page_heading(title)
      title  += " (#{count})" unless skip.include?(:count)
      classes = 'list-heading'
      classes = css_classes(classes, 'empty') if list.blank?
      html_tag(level, title, class: classes)
    end
  level += 1

-%>

<%= heading %>

<%= dec.render(row: row, offset: offset, level: level, skip: skip) %>
