<%# app/views/sys/_menu.html.erb -%>
<%-
  # System information pages menu.

  view_debug(__FILE__)

  level ||= 3

  outer = (level < 3) ? :div : :ul
  inner = (level < 3) ? :div : :li
  pages = [:index, *SysController::PAGES]
  links =
    pages.map { |page|
      next if page.to_s == params['action']
      html_tag(inner, class: 'page-action') {
        path   = get_path_for(:sys, page)
        label  = t("emma.sys.#{page}.label",   default: path)
        note   = t("emma.sys.#{page}.tooltip", default: nil)
        note &&= h(note.delete_suffix('.'))
        link_to(label, path, class: 'link') << html_div(note, class: 'note')
      }
    }.compact

-%>

<%= html_tag(outer, links, class: 'page-actions', role: 'navigation') %>
