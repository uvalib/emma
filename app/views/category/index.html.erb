<%# app/views/category/index.html.erb -%>
<%-
  # Category index.
  title ||= t('emma.category.index.title')

  item_list = page_items

  if item_list.present?
    all_count    = nil
    search_count = "#{total_items} categories found." # TODO: I18n
    search_count = content_tag(:div, search_count, class: 'search-count')
    controls     = pagination_controls
    terms        = search_terms.presence
  else
    all_count    = " (#{total_items})"
    search_count = controls = terms = nil
  end

  set_page_title(t('emma.category.index.label', default: title))
  append_page_title('-', hash_string(terms)) if terms.present?
  set_page_description(title)
-%>

<h1 class="heading"><%= title -%><%= all_count -%></h1>

<div class="category-list">

  <%# === Applied search terms (when applicable) === -%>
  <%= applied_search_terms(terms) if terms.present? %>

  <%# === Top pagination controls === -%>
  <%- if controls -%>
    <div class="pagination-top"><%= controls -%><%= search_count -%></div>
  <%- end -%>

  <%# === Items === -%>
  <%= render 'category/list', list: item_list, skip: :title %>

  <%# === Bottom pagination controls === -%>
  <%- if controls -%>
    <div class="pagination-bottom"><%= controls -%></div>
  <%- end -%>

</div>
