<%# app/views/upload/show.html.erb -%>
<%-
  # Show details of an upload

  view_debug(__FILE__)

  item  ||= @item
  image ||= nil
  dec     = UploadDecorator.new(item, cover: image, **context)
  item  ||= dec.object

  title ||= dec.page_heading(name: item.filename)
  help  ||= nil # dec.help_topic
  host  ||= @host

  title = "#{host} - #{title}" if host.present?

  unless modal?
    label = dec.page_meta_title(default: title)
    set_page_meta_title(label)
    set_page_description(title)
    set_page_robots(:noindex, :nofollow)
  end

  template_opt = { dec: dec }

-%>

<%= page_heading(title, help: help) %>
<%= page_description_section %>

<%= page_directions_section %>
<%= dec.preview %>
<%= render 'upload/details', template_opt %>

<%= page_notes_section %>
<%= dec.action_list unless modal? || cannot?(:edit, Upload) %>
