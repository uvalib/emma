<%# app/views/search/_list_item.html.erb -%>
<%-
  # A single EMMA Unified Search metadata record.

  action ||= params[:action].to_s
  item   ||= @item
  index  ||= nil
  return unless item || index

  count  ||= nil
  offset ||= page_offset
  add    ||= nil
  level  ||= 2
  row    ||= 1
  skip   ||= nil

  # skip = Array.wrap(skip)
  skip = [*skip, :thumbnail].uniq
  opt  = { index: index, row: row, offset: offset, level: level, skip: skip }
  opt[:max_index] = count - 1 if count
  opt[:id]        = model_item_id(item)

  number_method = "search_list_number_#{action}"
  number_method = :search_list_item_number unless respond_to?(number_method)

  list_method   = "search_list_item_#{action}"
  list_method   = :search_list_item unless respond_to?(list_method)
-%>

<%= send(number_method, item, **opt)   unless skip.include?(:number) %>
<%= thumbnail(item, **opt, link: true) unless skip.include?(:thumbnail) %>
<%= send(list_method, item, pairs: add, **opt) %>
