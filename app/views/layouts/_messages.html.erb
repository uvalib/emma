<%# app/views/layouts/_messages.html.erb -%>
<%-
  # Flash messages.

  messages =
    %i[alert notice].flat_map { |type|
      [flash.now[type], flash[type]].flatten.reject(&:blank?).uniq.map { |msg|
        html_div(msg.html_safe, class: type.to_s, role: 'alert')
      }
    }.presence
  messages &&= messages.unshift(nil).push(nil) # For leading/trailing newlines
  messages &&= safe_join(messages, "\n")

  css = 'flash-messages'
  css = css_classes(css, 'hidden') if messages.blank?

-%>

<div class="<%= css -%>">
  <%= messages %>
</div>
