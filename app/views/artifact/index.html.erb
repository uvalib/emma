<%# app/views/artifact/index.html.erb -%>
<%-
  # Artifacts index.

  title ||= t('emma.artifact.index.title')
  list  ||= artifact_list
  count ||= total_items
  terms ||= search_terms
  row   ||= 1
  help  ||= nil

  unless modal?
    set_page_title(t('emma.artifact.index.label', default: title))
    append_page_title('-', list_search_terms(terms)) if terms.present?
    set_page_description(title)
    set_page_robots(:noindex, :nofollow)
  end

  applied_terms, top_controls, bottom_controls =
    index_controls(terms, count: count, row: row)
  row   += [applied_terms, top_controls].compact.size
  title += " (#{count})" if list.blank?

  template_opt = { list: list, count: count, row: row, skip: :title }

-%>

<h1 class="heading"><%= title -%><%= help -%></h1>

<%= page_description %>

<div class="artifact-list">
  <%= applied_terms %>
  <%= top_controls %>
  <%= render 'artifact/list', template_opt %>
  <%= bottom_controls if list.present? %>
</div>

<%-
  abort 'artifact/index - This is not expected to be used'
-%>
