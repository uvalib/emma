// app/assets/stylesheets/feature/_images.scss

// @use 'shared/common'; // TODO: SASS 4.0

//=============================================================================
// Common <img> properties.
//=============================================================================

$image-border-width: 1px;

%image {
    object-fit:    contain;
    border:        $image-border-width solid gray;
    border-radius: 3px;
}

// noinspection SassScssResolvedByNameOnly
%thumbnail-dimensions {

    max-width:  $thumbnail-max-x;
    max-height: $thumbnail-max-y;
    height:     $thumbnail-max-y;

    @media #{$browser-ie} {
        max-width:  $ie-thumbnail-max-x;
        max-height: $ie-thumbnail-max-y;
        height:     $ie-thumbnail-max-y;
    }
}

%placeholder-image {
    border-color: transparent;
}

//=============================================================================
// Cover images.
//=============================================================================

// @see TitleHelper#cover_image
.cover-image {

    img {
        @extend %image;
    }

    .placeholder {

        @extend %placeholder-image;

        display: block;
        margin:  0 auto;
    }
}

//=============================================================================
// Thumbnail images.
//=============================================================================

// @see TitleHelper#thumbnail
.thumbnail {

    // NOTE: Determined experimentally for consistency across results pages.
    $min-thumbnail-width: 94px;

    min-width: $min-thumbnail-width;

    // noinspection SassScssResolvedByNameOnly
    img {
        @extend %image;
        @extend %thumbnail-dimensions;
    }

    .placeholder {

        @extend %placeholder-image;

        width:     $min-thumbnail-width - (2 * $image-border-width);
        height:    auto;
        transform: scale(0.5);
    }
}

// When a thumbnail is the content of a link, display the focus outline on the
// image and not on the enclosing <a> element.
a.thumbnail:focus {

    outline: none;

    // noinspection SassScssResolvedByNameOnly
    img {
        @extend %focus;
    }
}
