// app/assets/stylesheets/feature/_images.scss

@use 'shared/variables'      as *;
@use 'shared/mixins'         as *;
@use 'shared/feature/images' as image;

//=============================================================================
// Internal placeholder classes
//=============================================================================

%image {
    object-fit:    contain;
    border:        image.$border-width solid image.$border-color;
    border-radius: 3px;
}

%placeholder-image {
    border-color: transparent;
}

//=============================================================================
// Cover images
//=============================================================================

// @see BaseDecorator::List#cover
.cover-image {

    img {
        @extend %image;
    }

    .placeholder {

        @extend %placeholder-image;

        display: block;
        margin:  0 auto;
    }
}

//=============================================================================
// Thumbnail images
//=============================================================================

// @see BaseDecorator::List#thumbnail
.thumbnail {

    // NOTE: Determined experimentally for consistency across results pages.
    $min-thumbnail-width: 94px;

    min-width: $min-thumbnail-width;

    img {
        @extend %image;
        @include image.thumbnail-dimensions;
    }

    .placeholder {

        @extend %placeholder-image;

        width:     $min-thumbnail-width - (2 * image.$border-width);
        height:    auto;
        transform: scale(0.5);
    }

    // When a thumbnail is the content of a link (which is identical to the
    // title link) this is a convenience in a standard browser but a nuisance
    // in a screen reader.  However, <a aria-hidden="true" tabindex="-1">
    // doesn't actually take a link out of "focus order", so the
    // <a tabindex="-1"> wrapping the <img> must itself be wrapped in a
    // <div aria-hidden="true">.
    a.thumbnail {

        margin-bottom: 0;

        // Show focus outline on the image -- not on the enclosing <a> element.
        &:focus {

            outline: none;

            img {
                @include focus;
            }
        }
    }
}
