// app/assets/stylesheets/shared/_header.scss

// @use 'shared/common'; // TODO: SASS 4.0

//=============================================================================
// Page header.
//=============================================================================

// The <header> at the top of every page.
.layout-header {

    @extend %banner;

    font-size: x-large;

    //=========================================================================
    // Header sections
    //=========================================================================

    > * {
        display:        flex;
        flex-direction: row;
        flex:           0 1 auto;
    }

    // The logo (home link) and tagline on the left-hand side of the header.
    .logo-area {

        justify-content: flex-start;
        margin-top:      0;
        flex:            0 1 auto;

        > * {
            margin: auto $flex-gap-x auto 0;
        }

        @media #{$narrow-screen} {

            flex-direction: column;

            > * {
                margin: $flex-gap-y 0 0;
            }
        }
    }

    // Action controls on the right-hand side of the header, particularly the
    // "Sign in"/"Sign out" button, which appears in the upper-right corner of
    // the display regardless of the width of the display.
    .control-area {

        flex-wrap:       wrap-reverse;
        justify-content: flex-end;
        margin-top:      auto;
        overflow:        hidden;
        flex:            1 1 auto;

        > * {
            margin: auto 0 auto $flex-gap-x;
        }

        @media #{$narrow-screen} {

            flex-direction: column-reverse;
            margin-top:     0;
            margin-bottom:  $flex-gap-y;

            > * {
                margin: $flex-gap-y 0 0;
            }
        }
    }

    //=========================================================================
    // Header elements
    //=========================================================================

    // The fixed-size EMMA logo element.
    .logo {
        margin-top: 0;
        font-size:  xx-large;
        flex:       0 0 auto;
    }

    // The EMMA tagline next to the logo.
    //
    // This is reformatted to fit within the available display width, and is
    // not shown at all on small (narrow) displays due to insufficient screen
    // real estate.
    //
    .tagline {

        font-size:    smaller;
        font-variant: small-caps;
        flex:         0 1 auto;

        @media #{$medium-width} {
            font-size: small;
        }

        @media #{$narrow-screen} {
            display: none;
        }
    }

    // The name of the signed-in user.
    //
    // This is truncated with ellipses in cases where the display width is not
    // sufficient to show the whole name.
    //
    .user {
        width:         min-content;
        max-width:     100%;
        font-size:     smaller;
        overflow:      hidden;
        text-overflow: ellipsis;
        flex:          0 1 auto;
    }

    // The "Sign in"/"Sign out" button.
    //
    // This always appears in the upper-right corner of the display due to the
    // .content-area settings.
    //
    .session {

        min-width:     max-content;
        max-width:     max-content;
        padding:       0.25rem 0.375rem;
        border:        1px solid;
        border-radius: 0.5rem;
        flex:          0 0 auto;

        @media #{$narrow-screen} {
            margin-top: $flex-gap-y;
        }
    }

    .session-link:focus {
        outline-offset: 1px;
    }
}

// Navigation bar (<nav>) at the top of every page just below <header>.
.layout-navbar {

    @extend %banner;

    //=========================================================================
    // Navbar sections
    //=========================================================================

    .links {

        display:        flex;
        flex-direction: row;
        font-size:      x-large;

        > * {
            width:        max-content;
            margin-right: 0.5rem;
        }

        a:active {
            outline: 2px dotted white;
        }

        .active {
            text-decoration: underline;
        }

        // TODO: prefer hamburger menu for small screens?
        @media #{$narrow-screen} {

            flex-direction: column;

            .separator {
                display: none;
            }
        }
    }
}
