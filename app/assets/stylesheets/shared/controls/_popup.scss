// app/assets/stylesheets/shared/controls/_popup.scss

// @use 'shared/common'; // TODO: SASS 4.0

.popup-container {

    display:  inline-block;
    position: relative;

    // Activation area in the form of text/hyperlink.
    // noinspection SassScssResolvedByNameOnly
    .control.text {

        color:           -moz-hyperlinktext;
        color:           -webkit-link;
        color:           blue;
        text-decoration: underline;
        cursor:          pointer;

        &:focus {
            @extend %focus;
        }
    }

    // Activation area in the form of an icon/button.
    // noinspection SassScssResolvedByNameOnly
    .control.icon {

        @extend %button-hover;

        display:        block;
        margin:         0 0 0 0.5rem;
        padding:        0.1875rem 0.375rem;
        line-height:    1;
        vertical-align: text-top;
        font-size:      x-large;
        color:          $uva-accent-orange;
        background:     whitesmoke;
        border:         1px solid $uva-accent-orange;
        border-radius:  50%;
        cursor:         pointer;

        &:before {
            content: "\2605"; // BLACK STAR
        }

        &:focus {
            @extend %focus;
        }
    }

    // The panel displaying content which is hidden until activated.
    // noinspection SassScssResolvedByNameOnly
    .popup-panel {

        @extend %popup-shadow;

        display:          flex;
        flex-direction:   column;
        flex-wrap:        wrap;
        padding:          0.5rem;
        font:             message-box;
        background:       white;
        border:           0.25rem solid $uva-accent-orange;
        border-top-width: 1.5rem;
        border-radius:    0.75rem;
        box-shadow:       0.25rem 0.25rem 1rem 0.125rem gray;

        &.hidden {
            z-index: $z-hidden;
        }

        &:not(.hidden) {
            z-index: $z-popup;
        }

        @media #{$wide-screen} {
            position:   absolute;
            top:        1.5rem;
            left:       1.75rem;
            min-width:  33vw;
            min-height: 50vh;
        }

        @media #{$medium-width} {
            position:   fixed;
            left:       5vw;
            right:      5vw;
            min-height: 33vh;
        }

        @media #{$narrow-screen} {
            position:   fixed;
            top:        1rem;
            bottom:     1rem;
            left:       0.75rem;
            right:      0.75rem;
        }

        &.hidden {
            z-index: $z-hidden;
        }

        &:not(.hidden) {
            z-index: $z-popup;
        }

        //=====================================================================
        // Components
        //=====================================================================

        // The "X" located in the upper-right corner of the panel's "frame".
        .closer.icon {
            position:    absolute;
            top:         -1.5rem;
            right:       0.75rem;
            line-height: 1.5;
            font-size:   medium;
            font-weight: bold;
            color:       white;
            cursor:      pointer;

            &:focus {
                @extend %focus;
                outline-offset: 1px;
            }
        }

        > * {
            flex:       1 1 auto;
            overflow-x: hidden;
            overflow-y: auto;
        }

        // Container for the popup content.
        iframe {
            border: none;
        }

        // Temporary deferred-content placeholder.
        .deferred {
            font-size: large;
        }
    }

    // Controls at the bottom of the popup panel (at minimum a "Close" button).
    .popup-controls {

        display:         flex;
        justify-content: center;
        margin:          0;
        flex:            0 0 auto;

        //=====================================================================
        // Components
        //=====================================================================

        // noinspection SassScssResolvedByNameOnly
        button {

            @extend %control-button;

            margin: 1rem auto 0.5rem;

            @media #{$narrow-screen} {
                margin-top:    0.5rem;
                margin-bottom: 0.25rem;
            }
        }
    }
}
