<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Workflow::Base
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Workflow::Base";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (B)</a> &raquo;
    <span class='title'>Workflow</span>
     &raquo; 
    <span class="title">Base</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Workflow::Base
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Workflow::Base</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Workflow, Events, Roles, States, Transitions</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/workflow.rb<span class="defines">,<br />
  app/models/workflow.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Common workflow aspects.</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="../UploadWorkflow.html" title="UploadWorkflow (class)">UploadWorkflow</a></span></p>
</div>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="DEBUG_TRANSITION-constant" class="">DEBUG_TRANSITION =
          <div class="docstring">
  <div class="discussion">
    
<p>Even if workflow debugging is enabled, displaying transition hooks may be too noisy.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='const'>DEBUG_WORKFLOW</span> <span class='op'>&amp;&amp;</span> <span class='kw'>false</span></pre></dd>
      
        <dt id="SIMULATION-constant" class="">SIMULATION =
          <div class="docstring">
  <div class="discussion">
    
<p>Engage a simulated submission record instead of the actual database to simplify trials at the command line or within IRB.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='const'>DEBUG_WORKFLOW</span> <span class='op'>&amp;&amp;</span> <span class='kw'>false</span></pre></dd>
      
        <dt id="CONFIGURATION-constant" class="">CONFIGURATION =
          <div class="docstring">
  <div class="discussion">
    
<p>Root workflow configuration.</p>

<p>â€“ noinspection RailsI18nInspection ++</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>emma.workflow</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_deep_freeze'>deep_freeze</span></pre></dd>
      
        <dt id="FINAL_STATE-constant" class="">FINAL_STATE =
          <div class="docstring">
  <div class="discussion">
    
<p>The state which indicates that the item associated with the workflow has progressed to the the end.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='symbol'>:completed</span></pre></dd>
      
        <dt id="IF_DEBUG-constant" class="">IF_DEBUG =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span> <span class='label'>if:</span> <span class='tlambda'>-&gt;</span><span class='lparen'>(</span><span class='op'>*</span><span class='rparen'>)</span>  <span class='tlambeg'>{</span> <span class='const'>DEBUG_WORKFLOW</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span></pre></dd>
      
        <dt id="IF_COMPLETE-constant" class="">IF_COMPLETE =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span> <span class='label'>if:</span> <span class='tlambda'>-&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid_wf'>wf</span><span class='rparen'>)</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_wf'>wf</span><span class='period'>.</span><span class='id identifier rubyid_user?'>user?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_wf'>wf</span><span class='period'>.</span><span class='id identifier rubyid_complete?'>complete?</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span></pre></dd>
      
        <dt id="IF_READY-constant" class="">IF_READY =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span> <span class='label'>if:</span> <span class='tlambda'>-&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid_wf'>wf</span><span class='rparen'>)</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_wf'>wf</span><span class='period'>.</span><span class='id identifier rubyid_user?'>user?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_wf'>wf</span><span class='period'>.</span><span class='id identifier rubyid_ready?'>ready?</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#prev_state-instance_method" title="#prev_state (instance method)">#<strong>prev_state</strong>  &#x21d2; Symbol<sup>?</sup> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Last state before :suspended, :failed, :canceled, or :completed.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#configuration-class_method" title="configuration (class method)">.<strong>configuration</strong>  &#x21d2; Hash{Symbol=&gt;Hash} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Workflow model configuration.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_variant-class_method" title="default_variant (class method)">.<strong>default_variant</strong>  &#x21d2; Symbol<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The default workflow variant type.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#final_state-class_method" title="final_state (class method)">.<strong>final_state</strong>  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Final (completed) workflow state name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate-class_method" title="generate (class method)">.<strong>generate</strong>(data, **opt)  &#x21d2; Workflow::Base </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generate a new instance of the appropriate workflow variant subclass (or the workflow base class if the variant could not be found).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#state_label-class_method" title="state_label (class method)">.<strong>state_label</strong>  &#x21d2; Hash{Symbol=&gt;Hash} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Workflow state labels.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#variant%3F-class_method" title="variant? (class method)">.<strong>variant?</strong>(value)  &#x21d2; Array&lt;Symbol&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Indicate whether the value denotes a workflow variant.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#variant_table-class_method" title="variant_table (class method)">.<strong>variant_table</strong>  &#x21d2; Hash{Symbol=&gt;Class&lt;UploadWorkflow&gt;} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Table of variant workflow types under this workflow base class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#variant_type-class_method" title="variant_type (class method)">.<strong>variant_type</strong>  &#x21d2; Symbol<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the variant workflow type or <strong>nil</strong> if the class is not a workflow variant subclass.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#variant_types-class_method" title="variant_types (class method)">.<strong>variant_types</strong>  &#x21d2; Array&lt;Symbol&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Variant workflow types under this workflow base class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#workflow_column-class_method" title="workflow_column (class method)">.<strong>workflow_column</strong>(column_name = nil)  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The table field associated with workflow state.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#workflow_phase-class_method" title="workflow_phase (class method)">.<strong>workflow_phase</strong>  &#x21d2; Symbol<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The workflow phase is indicated by the variant type of the subclass.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#workflow_type-class_method" title="workflow_type (class method)">.<strong>workflow_type</strong>  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the workflow type which is a key under &#39;en.emma.workflow&#39;.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#curr_state-instance_method" title="#curr_state (instance method)">#<strong>curr_state</strong>  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Current workflow state name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#final_state-instance_method" title="#final_state (instance method)">#<strong>final_state</strong>  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Final (completed) workflow state name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#init_state-instance_method" title="#init_state (instance method)">#<strong>init_state</strong>  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initial workflow state name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(data, **opt)  &#x21d2; Base </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#variant_type-instance_method" title="#variant_type (instance method)">#<strong>variant_type</strong>  &#x21d2; Symbol<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the variant workflow type or <strong>nil</strong> if the class is not a workflow variant subclass.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#workflow_column-instance_method" title="#workflow_column (instance method)">#<strong>workflow_column</strong>  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The table field associated with workflow state.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#workflow_phase-instance_method" title="#workflow_phase (instance method)">#<strong>workflow_phase</strong>  &#x21d2; Symbol<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The workflow phase is indicated by the variant type of the subclass.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#workflow_type-instance_method" title="#workflow_type (instance method)">#<strong>workflow_type</strong>  &#x21d2; Symbol </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the workflow type.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(data, **opt)  &#x21d2; <tt><span class='object_link'><a href="" title="Workflow::Base (class)">Base</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new instance.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>data</span>
      
      
        <span class='type'>(<tt>*</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>opt</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Passed to #initialize_state</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>**opt</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:user</span>
          <span class="type">(<tt><span class='object_link'><a href="../User.html" title="User (class)">User</a></span></tt>, <tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
        </li>
      
        <li>
          <span class="name">:no_sim</span>
          <span class="type">(<tt><span class='object_link'><a href="../top-level-namespace.html#Boolean-constant" title="Boolean (constant)">Boolean</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
        </li>
      
    </ul>
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1038
1039
1040
1041
1042
1043</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1038</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
  <span class='ivar'>@parameters</span> <span class='op'>=</span> <span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:params</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_simulating'>simulating</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:no_sim</span><span class='rbracket'>]</span> <span class='comment'># TODO: remove?
</span>  <span class='id identifier rubyid_set_current_user'>set_current_user</span><span class='lparen'>(</span><span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_initialize_state'>initialize_state</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="prev_state=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="prev_state-instance_method">
  
    #<strong>prev_state</strong>  &#x21d2; <tt>Symbol</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Last state before :suspended, :failed, :canceled, or :completed.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


995
996
997
998
999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034
1035
1036
1037
1038
1039
1040
1041
1042
1043
1044
1045
1046
1047
1048
1049
1050
1051
1052
1053
1054
1055
1056
1057
1058
1059
1060
1061
1062
1063
1064
1065
1066
1067
1068
1069
1070
1071
1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092
1093
1094
1095
1096
1097
1098
1099
1100
1101
1102
1103
1104
1105
1106
1107
1108
1109
1110
1111
1112
1113
1114
1115
1116
1117
1118
1119
1120
1121
1122
1123
1124
1125
1126
1127
1128
1129
1130
1131
1132
1133
1134
1135
1136
1137
1138
1139
1140
1141
1142
1143
1144
1145
1146
1147
1148
1149
1150
1151
1152
1153
1154
1155
1156
1157
1158
1159
1160
1161
1162
1163
1164
1165
1166
1167
1168
1169
1170
1171
1172
1173
1174
1175
1176
1177
1178
1179
1180
1181
1182
1183
1184
1185
1186
1187
1188
1189
1190
1191
1192
1193
1194
1195
1196
1197
1198
1199
1200
1201
1202
1203
1204
1205
1206
1207
1208
1209
1210
1211
1212
1213
1214
1215
1216
1217
1218
1219
1220
1221
1222
1223
1224
1225
1226
1227
1228
1229
1230
1231
1232
1233
1234
1235
1236
1237
1238
1239
1240
1241
1242
1243
1244
1245
1246
1247
1248
1249
1250
1251
1252
1253
1254
1255
1256
1257
1258
1259
1260
1261
1262
1263
1264
1265
1266
1267
1268
1269
1270
1271
1272
1273
1274
1275
1276
1277
1278
1279
1280
1281
1282
1283
1284
1285
1286
1287
1288
1289
1290
1291
1292
1293
1294
1295
1296
1297
1298
1299
1300
1301
1302
1303
1304
1305
1306
1307
1308
1309
1310
1311
1312
1313
1314
1315
1316</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 995</span>

<span class='kw'>class</span> <span class='const'>Workflow</span><span class='op'>::</span><span class='const'>Base</span>

  <span class='id identifier rubyid_include'>include</span> <span class='const'>Workflow</span><span class='op'>::</span><span class='const'>Base</span><span class='op'>::</span><span class='const'>Roles</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Workflow</span><span class='op'>::</span><span class='const'>Base</span><span class='op'>::</span><span class='const'>Events</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Workflow</span><span class='op'>::</span><span class='const'>Base</span><span class='op'>::</span><span class='const'>States</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Workflow</span><span class='op'>::</span><span class='const'>Base</span><span class='op'>::</span><span class='const'>Transitions</span>

  <span class='comment'># ===========================================================================
</span>  <span class='comment'># :section: Workflow event definition options
</span>  <span class='comment'># ===========================================================================
</span>
  <span class='id identifier rubyid_public'>public</span>

  <span class='const'><span class='object_link'><a href="#IF_DEBUG-constant" title="Workflow::Base::IF_DEBUG (constant)">IF_DEBUG</a></span></span>    <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>if:</span> <span class='tlambda'>-&gt;</span><span class='lparen'>(</span><span class='op'>*</span><span class='rparen'>)</span>  <span class='tlambeg'>{</span> <span class='const'>DEBUG_WORKFLOW</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="#IF_COMPLETE-constant" title="Workflow::Base::IF_COMPLETE (constant)">IF_COMPLETE</a></span></span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>if:</span> <span class='tlambda'>-&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid_wf'>wf</span><span class='rparen'>)</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_wf'>wf</span><span class='period'>.</span><span class='id identifier rubyid_user?'>user?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_wf'>wf</span><span class='period'>.</span><span class='id identifier rubyid_complete?'>complete?</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="#IF_READY-constant" title="Workflow::Base::IF_READY (constant)">IF_READY</a></span></span>    <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>if:</span> <span class='tlambda'>-&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid_wf'>wf</span><span class='rparen'>)</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_wf'>wf</span><span class='period'>.</span><span class='id identifier rubyid_user?'>user?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_wf'>wf</span><span class='period'>.</span><span class='id identifier rubyid_ready?'>ready?</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>

  <span class='comment'># ===========================================================================
</span>  <span class='comment'># :section:
</span>  <span class='comment'># ===========================================================================
</span>
  <span class='id identifier rubyid_public'>public</span>

  <span class='comment'># Last state before :suspended, :failed, :canceled, or :completed.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol, nil]
</span>  <span class='comment'>#
</span>  <span class='id identifier rubyid_attr_reader'>attr_reader</span> <span class='symbol'>:prev_state</span>

  <span class='comment'># ===========================================================================
</span>  <span class='comment'># :section:
</span>  <span class='comment'># ===========================================================================
</span>
  <span class='id identifier rubyid_public'>public</span>

  <span class='comment'># Create a new instance.
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [*]    data
</span>  <span class='comment'># @param [Hash] opt                 Passed to #initialize_state
</span>  <span class='comment'>#
</span>  <span class='comment'># @option opt [User, String] :user
</span>  <span class='comment'># @option opt [Boolean]      :no_sim
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
    <span class='ivar'>@parameters</span> <span class='op'>=</span> <span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:params</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_simulating'>simulating</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:no_sim</span><span class='rbracket'>]</span> <span class='comment'># TODO: remove?
</span>    <span class='id identifier rubyid_set_current_user'>set_current_user</span><span class='lparen'>(</span><span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_initialize_state'>initialize_state</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># ===========================================================================
</span>  <span class='comment'># :section:
</span>  <span class='comment'># ===========================================================================
</span>
  <span class='id identifier rubyid_protected'>protected</span>

  <span class='comment'># Set initial state.
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [*]    data
</span>  <span class='comment'># @param [Hash] opt
</span>  <span class='comment'>#
</span>  <span class='comment'># @option opt [Symbol, String] :start_state
</span>  <span class='comment'># @option opt [Symbol, String] :init_event
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [void]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_initialize_state'>initialize_state</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
    <span class='id identifier rubyid___debug'><span class='object_link'><a href="../top-level-namespace.html#__debug-instance_method" title="#__debug (method)">__debug</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>WORKFLOW initialize_state | curr_state = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_curr_state'>curr_state</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> | init_state = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_init_state'>init_state</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> | opt[:start_state] = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:start_state</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_content'> | opt[:init_event] = </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:init_event</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:start_state</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_presence'>presence</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
    <span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span> <span class='op'>==</span> <span class='id identifier rubyid_init_state'>init_state</span>
    <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:init_event</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_presence'>presence</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_sym'>to_sym</span>

    <span class='id identifier rubyid_reset_status'>reset_status</span>

    <span class='comment'># Set initial state if specified.
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_state'>state</span>
      <span class='id identifier rubyid___debug'><span class='object_link'><a href="../top-level-namespace.html#__debug-instance_method" title="#__debug (method)">__debug</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>WORKFLOW initial state: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_persist_workflow_state'>persist_workflow_state</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='comment'># Apply initial event if specified.
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_event'>event</span>
      <span class='id identifier rubyid___debug'><span class='object_link'><a href="../top-level-namespace.html#__debug-instance_method" title="#__debug (method)">__debug</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>WORKFLOW initial event: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_event'>event</span><span class='embexpr_end'>}</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>!</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='op'>*</span><span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_presence'>presence</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>

  <span class='comment'># ===========================================================================
</span>  <span class='comment'># :section:
</span>  <span class='comment'># ===========================================================================
</span>
  <span class='id identifier rubyid_public'>public</span>

  <span class='comment'># Current workflow state name.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_curr_state'>curr_state</span>
    <span class='id identifier rubyid_current_state'>current_state</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>end</span>

  <span class='comment'># Initial workflow state name.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_init_state'>init_state</span>
    <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_initial_state'>initial_state</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>end</span>

  <span class='comment'># Final (completed) workflow state name.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_final_state'>final_state</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_final_state'>final_state</span>
  <span class='kw'>end</span>

  <span class='comment'># ===========================================================================
</span>  <span class='comment'># :section: Workflow overrides
</span>  <span class='comment'># ===========================================================================
</span>
  <span class='id identifier rubyid_protected'>protected</span>

  <span class='comment'># Get the current state of the workflow item.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String]
</span>  <span class='comment'>#
</span>  <span class='comment'># This method overrides:
</span>  <span class='comment'># @see Workflow::InstanceMethods#load_workflow_state
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_load_workflow_state'>load_workflow_state</span>
    <span class='kw'>super</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span>

  <span class='comment'># Set the current state of the workflow item.
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [Symbol, String] new_value
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [String]
</span>  <span class='comment'>#
</span>  <span class='comment'># This method overrides:
</span>  <span class='comment'># @see Workflow::InstanceMethods#persist_workflow_state
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_persist_workflow_state'>persist_workflow_state</span><span class='lparen'>(</span><span class='id identifier rubyid_new_value'>new_value</span><span class='rparen'>)</span>
    <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_new_value'>new_value</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># ===========================================================================
</span>  <span class='comment'># :section:
</span>  <span class='comment'># ===========================================================================
</span>
  <span class='id identifier rubyid_public'>public</span>

  <span class='comment'># The table field associated with workflow state.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_workflow_column'>workflow_column</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_workflow_column'>workflow_column</span>
  <span class='kw'>end</span>

  <span class='comment'># Return the workflow type.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_workflow_type'>workflow_type</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_workflow_type'>workflow_type</span>
  <span class='kw'>end</span>

  <span class='comment'># The workflow phase is indicated by the variant type of the subclass.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol, nil]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_workflow_phase'>workflow_phase</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_workflow_phase'>workflow_phase</span>
  <span class='kw'>end</span>

  <span class='comment'># Return the variant workflow type or *nil* if the class is not a workflow
</span>  <span class='comment'># variant subclass.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol, nil]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_variant_type'>variant_type</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_variant_type'>variant_type</span>
  <span class='kw'>end</span>

  <span class='comment'># ===========================================================================
</span>  <span class='comment'># :section:  Workflow overrides
</span>  <span class='comment'># ===========================================================================
</span>
  <span class='id identifier rubyid_public'>public</span>

  <span class='comment'># The table field associated with workflow state.
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [*] column_name            Ignored.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol]
</span>  <span class='comment'>#
</span>  <span class='comment'># This method overrides:
</span>  <span class='comment'># @see Workflow::ClassMethods#workflow_column
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_workflow_column'>workflow_column</span><span class='lparen'>(</span><span class='id identifier rubyid_column_name'>column_name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>To be overridden by the workflow subclass</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># ===========================================================================
</span>  <span class='comment'># :section: Class methods
</span>  <span class='comment'># ===========================================================================
</span>
  <span class='id identifier rubyid_public'>public</span>

  <span class='comment'># Workflow model configuration.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Hash{Symbol=&gt;Hash}]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_configuration'>configuration</span>
    <span class='const'><span class='object_link'><a href="#CONFIGURATION-constant" title="Workflow::Base::CONFIGURATION (constant)">CONFIGURATION</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_workflow_type'>workflow_type</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='comment'># Workflow state labels.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Hash{Symbol=&gt;Hash}]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_state_label'>state_label</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_configuration'>configuration</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_properties'>properties</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_true?'>true?</span><span class='lparen'>(</span><span class='id identifier rubyid_properties'>properties</span><span class='lbracket'>[</span><span class='symbol'>:disabled</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_false?'>false?</span><span class='lparen'>(</span><span class='id identifier rubyid_properties'>properties</span><span class='lbracket'>[</span><span class='symbol'>:enabled</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_state_label'>state_label</span> <span class='op'>=</span> <span class='id identifier rubyid_properties'>properties</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>
      <span class='lbracket'>[</span><span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_state_label'>state_label</span><span class='rbracket'>]</span>
    <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span>
  <span class='kw'>end</span>

  <span class='comment'># Final (completed) workflow state name.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_final_state'>final_state</span>
    <span class='const'><span class='object_link'><a href="#FINAL_STATE-constant" title="Workflow::Base::FINAL_STATE (constant)">FINAL_STATE</a></span></span>
  <span class='kw'>end</span>

  <span class='comment'># ===========================================================================
</span>  <span class='comment'># :section: Class methods
</span>  <span class='comment'># ===========================================================================
</span>
  <span class='id identifier rubyid_public'>public</span>

  <span class='comment'># Return the workflow type which is a key under &#39;en.emma.workflow&#39;.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_workflow_type'>workflow_type</span>
  <span class='kw'>end</span>

  <span class='comment'># The workflow phase is indicated by the variant type of the subclass.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol, nil]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_workflow_phase'>workflow_phase</span>
    <span class='id identifier rubyid_variant_type'>variant_type</span>
  <span class='kw'>end</span>

  <span class='comment'># Return the variant workflow type or *nil* if the class is not a workflow
</span>  <span class='comment'># variant subclass.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol, nil]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variant_type'>variant_type</span>
  <span class='kw'>end</span>

  <span class='comment'># The default workflow variant type.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Symbol, nil]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_default_variant'>default_variant</span>
    <span class='symbol'>:create</span>
  <span class='kw'>end</span>

  <span class='comment'># Table of variant workflow types under this workflow base class.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Hash{Symbol=&gt;Class&lt;UploadWorkflow&gt;}]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variant_table'>variant_table</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>To be overridden by the workflow subclass</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># Variant workflow types under this workflow base class.
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Array&lt;Symbol&gt;]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variant_types'>variant_types</span>
    <span class='id identifier rubyid_variant_table'>variant_table</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
  <span class='kw'>end</span>

  <span class='comment'># Indicate whether the value denotes a workflow variant.
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [Symbol, String, nil] value
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Array&lt;Symbol&gt;]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variant?'>variant?</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_variant_types'>variant_types</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Generate a new instance of the appropriate workflow variant subclass
</span>  <span class='comment'># (or the workflow base class if the variant could not be found).
</span>  <span class='comment'>#
</span>  <span class='comment'># @param [*]    data
</span>  <span class='comment'># @param [Hash] opt             Passed to #initialize except for:
</span>  <span class='comment'>#
</span>  <span class='comment'># @option opt [Symbol,String] :variant
</span>  <span class='comment'>#
</span>  <span class='comment'># @return [Workflow::Base]
</span>  <span class='comment'>#
</span>  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_variant'>variant</span>  <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_opt'>opt</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:variant</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:event</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
    <span class='id identifier rubyid_subclass'>subclass</span> <span class='op'>=</span> <span class='id identifier rubyid_variant_table'>variant_table</span><span class='lbracket'>[</span><span class='id identifier rubyid_variant'>variant</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_variant_table'>variant_table</span><span class='lbracket'>[</span><span class='id identifier rubyid_default_variant'>default_variant</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>self</span>
    <span class='id identifier rubyid_subclass'>subclass</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="configuration-class_method">
  
    .<strong>configuration</strong>  &#x21d2; <tt>Hash{Symbol=&gt;Hash}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Workflow model configuration.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;Hash}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1212
1213
1214</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1212</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_configuration'>configuration</span>
  <span class='const'><span class='object_link'><a href="#CONFIGURATION-constant" title="Workflow::Base::CONFIGURATION (constant)">CONFIGURATION</a></span></span><span class='lbracket'>[</span><span class='id identifier rubyid_workflow_type'>workflow_type</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_variant-class_method">
  
    .<strong>default_variant</strong>  &#x21d2; <tt>Symbol</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The default workflow variant type.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1270
1271
1272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1270</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_default_variant'>default_variant</span>
  <span class='symbol'>:create</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="final_state-class_method">
  
    .<strong>final_state</strong>  &#x21d2; <tt>Symbol</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Final (completed) workflow state name.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1233
1234
1235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1233</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_final_state'>final_state</span>
  <span class='const'><span class='object_link'><a href="#FINAL_STATE-constant" title="Workflow::Base::FINAL_STATE (constant)">FINAL_STATE</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate-class_method">
  
    .<strong>generate</strong>(data, **opt)  &#x21d2; <tt><span class='object_link'><a href="" title="Workflow::Base (class)">Workflow::Base</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generate a new instance of the appropriate workflow variant subclass (or the workflow base class if the variant could not be found).</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>data</span>
      
      
        <span class='type'>(<tt>*</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>opt</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Passed to #initialize except for:</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>**opt</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:variant</span>
          <span class="type">(<tt>Symbol</tt>, <tt>String</tt>)</span>
          <span class="default">
            
          </span>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Workflow::Base (class)">Workflow::Base</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1310
1311
1312
1313
1314</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1310</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_generate'>generate</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_variant'>variant</span>  <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_opt'>opt</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:variant</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_opt'>opt</span><span class='lbracket'>[</span><span class='symbol'>:event</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='id identifier rubyid_subclass'>subclass</span> <span class='op'>=</span> <span class='id identifier rubyid_variant_table'>variant_table</span><span class='lbracket'>[</span><span class='id identifier rubyid_variant'>variant</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_variant_table'>variant_table</span><span class='lbracket'>[</span><span class='id identifier rubyid_default_variant'>default_variant</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>self</span>
  <span class='id identifier rubyid_subclass'>subclass</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="state_label-class_method">
  
    .<strong>state_label</strong>  &#x21d2; <tt>Hash{Symbol=&gt;Hash}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Workflow state labels.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;Hash}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1220
1221
1222
1223
1224
1225
1226
1227</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1220</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_state_label'>state_label</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_configuration'>configuration</span><span class='lbracket'>[</span><span class='symbol'>:state</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span><span class='op'>|</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_properties'>properties</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_true?'>true?</span><span class='lparen'>(</span><span class='id identifier rubyid_properties'>properties</span><span class='lbracket'>[</span><span class='symbol'>:disabled</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_false?'>false?</span><span class='lparen'>(</span><span class='id identifier rubyid_properties'>properties</span><span class='lbracket'>[</span><span class='symbol'>:enabled</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_state_label'>state_label</span> <span class='op'>=</span> <span class='id identifier rubyid_properties'>properties</span><span class='lbracket'>[</span><span class='symbol'>:label</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_state'>state</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_state_label'>state_label</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="variant?-class_method">
  
    .<strong>variant?</strong>(value)  &#x21d2; <tt>Array&lt;Symbol&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Indicate whether the value denotes a workflow variant.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1296
1297
1298</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1296</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variant?'>variant?</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_variant_types'>variant_types</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="variant_table-class_method">
  
    .<strong>variant_table</strong>  &#x21d2; <tt>Hash{Symbol=&gt;Class&lt;<span class='object_link'><a href="../UploadWorkflow.html" title="UploadWorkflow (class)">UploadWorkflow</a></span>&gt;}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Table of variant workflow types under this workflow base class.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;Class&lt;<span class='object_link'><a href="../UploadWorkflow.html" title="UploadWorkflow (class)">UploadWorkflow</a></span>&gt;}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1278
1279
1280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1278</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variant_table'>variant_table</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>To be overridden by the workflow subclass</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="variant_type-class_method">
  
    .<strong>variant_type</strong>  &#x21d2; <tt>Symbol</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return the variant workflow type or <strong>nil</strong> if the class is not a workflow variant subclass.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1263
1264</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1263</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variant_type'>variant_type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="variant_types-class_method">
  
    .<strong>variant_types</strong>  &#x21d2; <tt>Array&lt;Symbol&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Variant workflow types under this workflow base class.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1286
1287
1288</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1286</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_variant_types'>variant_types</span>
  <span class='id identifier rubyid_variant_table'>variant_table</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="workflow_column-class_method">
  
    .<strong>workflow_column</strong>(column_name = nil)  &#x21d2; <tt>Symbol</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The table field associated with workflow state.</p>

<p>This method overrides:</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>column_name</span>
      
      
        <span class='type'>(<tt>*</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Ignored.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>ClassMethods#workflow_column</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1198
1199
1200</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1198</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_workflow_column'>workflow_column</span><span class='lparen'>(</span><span class='id identifier rubyid_column_name'>column_name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>To be overridden by the workflow subclass</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="workflow_phase-class_method">
  
    .<strong>workflow_phase</strong>  &#x21d2; <tt>Symbol</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The workflow phase is indicated by the variant type of the subclass.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1254
1255
1256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1254</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_workflow_phase'>workflow_phase</span>
  <span class='id identifier rubyid_variant_type'>variant_type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="workflow_type-class_method">
  
    .<strong>workflow_type</strong>  &#x21d2; <tt>Symbol</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return the workflow type which is a key under &#39;en.emma.workflow&#39;.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1247
1248</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1247</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_workflow_type'>workflow_type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="curr_state-instance_method">
  
    #<strong>curr_state</strong>  &#x21d2; <tt>Symbol</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Current workflow state name.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1094
1095
1096</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1094</span>

<span class='kw'>def</span> <span class='id identifier rubyid_curr_state'>curr_state</span>
  <span class='id identifier rubyid_current_state'>current_state</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="final_state-instance_method">
  
    #<strong>final_state</strong>  &#x21d2; <tt>Symbol</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Final (completed) workflow state name.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1110
1111
1112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1110</span>

<span class='kw'>def</span> <span class='id identifier rubyid_final_state'>final_state</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_final_state'>final_state</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="init_state-instance_method">
  
    #<strong>init_state</strong>  &#x21d2; <tt>Symbol</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initial workflow state name.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1102
1103
1104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1102</span>

<span class='kw'>def</span> <span class='id identifier rubyid_init_state'>init_state</span>
  <span class='id identifier rubyid_spec'>spec</span><span class='period'>.</span><span class='id identifier rubyid_initial_state'>initial_state</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="variant_type-instance_method">
  
    #<strong>variant_type</strong>  &#x21d2; <tt>Symbol</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return the variant workflow type or <strong>nil</strong> if the class is not a workflow variant subclass.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1179
1180
1181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1179</span>

<span class='kw'>def</span> <span class='id identifier rubyid_variant_type'>variant_type</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_variant_type'>variant_type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="workflow_column-instance_method">
  
    #<strong>workflow_column</strong>  &#x21d2; <tt>Symbol</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The table field associated with workflow state.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1154
1155
1156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1154</span>

<span class='kw'>def</span> <span class='id identifier rubyid_workflow_column'>workflow_column</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_workflow_column'>workflow_column</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="workflow_phase-instance_method">
  
    #<strong>workflow_phase</strong>  &#x21d2; <tt>Symbol</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The workflow phase is indicated by the variant type of the subclass.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1170
1171
1172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1170</span>

<span class='kw'>def</span> <span class='id identifier rubyid_workflow_phase'>workflow_phase</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_workflow_phase'>workflow_phase</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="workflow_type-instance_method">
  
    #<strong>workflow_type</strong>  &#x21d2; <tt>Symbol</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return the workflow type.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1162
1163
1164</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/workflow.rb', line 1162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_workflow_type'>workflow_type</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_workflow_type'>workflow_type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Mar 16 14:51:23 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.2).
</div>

    </div>
  </body>
</html>