<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: FileFormat
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "FileFormat";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (F)</a> &raquo;
    
    
    <span class="title">FileFormat</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: FileFormat
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Emma/Unicode.html" title="Emma::Unicode (module)">Emma::Unicode</a></span></dd>
  </dl>
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="BrailleFormat.html" title="BrailleFormat (module)">BrailleFormat</a></span>, <span class='object_link'><a href="BrfFormat.html" title="BrfFormat (module)">BrfFormat</a></span>, <span class='object_link'><a href="DaisyAudioFormat.html" title="DaisyAudioFormat (module)">DaisyAudioFormat</a></span>, <span class='object_link'><a href="DaisyFormat.html" title="DaisyFormat (module)">DaisyFormat</a></span>, <span class='object_link'><a href="EpubFormat.html" title="EpubFormat (module)">EpubFormat</a></span>, <span class='object_link'><a href="GrayscalePdfFormat.html" title="GrayscalePdfFormat (module)">GrayscalePdfFormat</a></span>, <span class='object_link'><a href="KurzweilFormat.html" title="KurzweilFormat (module)">KurzweilFormat</a></span>, <span class='object_link'><a href="OcfFormat.html" title="OcfFormat (module)">OcfFormat</a></span>, <span class='object_link'><a href="PdfFormat.html" title="PdfFormat (module)">PdfFormat</a></span>, <span class='object_link'><a href="RtfFormat.html" title="RtfFormat (module)">RtfFormat</a></span>, <span class='object_link'><a href="TactileFormat.html" title="TactileFormat (module)">TactileFormat</a></span>, <span class='object_link'><a href="WordFormat.html" title="WordFormat (module)">WordFormat</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/concerns/file_format.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Definitions for remediated file types.</p>

<p>A class including this module is required to have the following constants defined:</p>

<pre class="code ruby"><code class="ruby">:FORMAT_FIELDS        Hash{Symbol=&gt;Proc,Symbol}
:FIELD_TRANSFORMS     Hash{Symbol=&gt;Hash{Symbol=&gt;Proc,Symbol}}
:FIELD_ALWAYS_ARRAY   Array&lt;Symbol&gt;
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="TYPES-constant" class="">TYPES =
          <div class="docstring">
  <div class="discussion">
    
<p>Known format types.</p>

<p>â€“ noinspection RailsI18nInspection ++</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="file.types.en.html" title="types.en">types.en</a></li>
    
  </ul>

</div>
        </dt>
        <dd><pre class="code"><span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>emma.format</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="FORMAT_MISSING-constant" class="">FORMAT_MISSING =
          <div class="docstring">
  <div class="discussion">
    
<p>Placeholder for an unknown format.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>???</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="FILE_FORMAT_SEP-constant" class="">FILE_FORMAT_SEP =
          <div class="docstring">
  <div class="discussion">
    
<p>Separator between values of a multi-valued field.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Emma/Unicode.html#EN_SPACE-constant" title="Emma::Unicode::EN_SPACE (constant)">EN_SPACE</a></span></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Emma/Unicode.html#BLACK_CIRCLE-constant" title="Emma::Unicode::BLACK_CIRCLE (constant)">BLACK_CIRCLE</a></span></span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="Emma/Unicode.html#EN_SPACE-constant" title="Emma::Unicode::EN_SPACE (constant)">EN_SPACE</a></span></span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="FIELD_TRANSFORMS-constant" class="">FIELD_TRANSFORMS =
          <div class="docstring">
  <div class="discussion">
    
<p>FIELD_TRANSFORMS</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#field_transforms-instance_method" title="FileFormat#field_transforms (method)">#field_transforms</a></span></li>
    
  </ul>

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>field:</span> <span class='lbrace'>{</span>
    <span class='label'>Date:</span>             <span class='symbol'>:format_date</span><span class='comma'>,</span>
    <span class='label'>CopyrightDate:</span>    <span class='symbol'>:format_date</span><span class='comma'>,</span>
    <span class='label'>CreationDate:</span>     <span class='symbol'>:format_date_time</span><span class='comma'>,</span>
    <span class='label'>ModifiedDate:</span>     <span class='symbol'>:format_date_time</span><span class='comma'>,</span>
    <span class='label'>ProductionDate:</span>   <span class='symbol'>:format_date_time</span><span class='comma'>,</span>
    <span class='label'>PublicationDate:</span>  <span class='symbol'>:format_date</span><span class='comma'>,</span>
    <span class='label'>RevisionDate:</span>     <span class='symbol'>:format_date_time</span><span class='comma'>,</span>
    <span class='label'>SourceDate:</span>       <span class='symbol'>:format_date_time</span><span class='comma'>,</span>
    <span class='label'>SubmissionDate:</span>   <span class='symbol'>:format_date_time</span><span class='comma'>,</span>
    <span class='label'>Language:</span>         <span class='tlambda'>-&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span> <span class='tlambeg'>{</span> <span class='id identifier rubyid_normalize_language'>normalize_language</span><span class='lparen'>(</span><span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='rbrace'>}</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_deep_freeze'>deep_freeze</span></pre></dd>
      
        <dt id="FIELD_ALWAYS_ARRAY-constant" class="">FIELD_ALWAYS_ARRAY =
          <div class="docstring">
  <div class="discussion">
    
<p>File format fields whose values should be provided as an array even if there is only a single value element.</p>

<p>Compare with:</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#field_value_array-instance_method" title="FileFormat#field_value_array (method)">#field_value_array</a></span></li>
    
      <li>Upload#FIELD_ALWAYS_ARRAY</li>
    
  </ul>

</div>
        </dt>
        <dd><pre class="code"><span class='qsymbols_beg'>%i[</span><span class='words_sep'>
  </span><span class='tstring_content'>AccessibilityControl</span><span class='words_sep'>
  </span><span class='tstring_content'>AccessibilityFeature</span><span class='words_sep'>
  </span><span class='tstring_content'>AccessibilityHazard</span><span class='words_sep'>
  </span><span class='tstring_content'>AccessMode</span><span class='words_sep'>
  </span><span class='tstring_content'>AccessModeSufficient</span><span class='words_sep'>
  </span><span class='tstring_content'>Author</span><span class='words_sep'>
  </span><span class='tstring_content'>Contributor</span><span class='words_sep'>
  </span><span class='tstring_content'>CoverImage</span><span class='words_sep'>
  </span><span class='tstring_content'>Creator</span><span class='words_sep'>
  </span><span class='tstring_content'>Keywords</span><span class='words_sep'>
  </span><span class='tstring_content'>Subject</span><span class='words_sep'>
</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  



  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="Emma/Unicode.html" title="Emma::Unicode (module)">Emma::Unicode</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Emma/Unicode.html#BANG-constant" title="Emma::Unicode::BANG (constant)">Emma::Unicode::BANG</a></span>, <span class='object_link'><a href="Emma/Unicode.html#BLACK_CIRCLE-constant" title="Emma::Unicode::BLACK_CIRCLE (constant)">Emma::Unicode::BLACK_CIRCLE</a></span>, <span class='object_link'><a href="Emma/Unicode.html#CHECK_MARK-constant" title="Emma::Unicode::CHECK_MARK (constant)">Emma::Unicode::CHECK_MARK</a></span>, <span class='object_link'><a href="Emma/Unicode.html#DELTA-constant" title="Emma::Unicode::DELTA (constant)">Emma::Unicode::DELTA</a></span>, <span class='object_link'><a href="Emma/Unicode.html#EM_DASH-constant" title="Emma::Unicode::EM_DASH (constant)">Emma::Unicode::EM_DASH</a></span>, <span class='object_link'><a href="Emma/Unicode.html#EM_SPACE-constant" title="Emma::Unicode::EM_SPACE (constant)">Emma::Unicode::EM_SPACE</a></span>, <span class='object_link'><a href="Emma/Unicode.html#EN_DASH-constant" title="Emma::Unicode::EN_DASH (constant)">Emma::Unicode::EN_DASH</a></span>, <span class='object_link'><a href="Emma/Unicode.html#EN_SPACE-constant" title="Emma::Unicode::EN_SPACE (constant)">Emma::Unicode::EN_SPACE</a></span>, <span class='object_link'><a href="Emma/Unicode.html#HEAVY_X-constant" title="Emma::Unicode::HEAVY_X (constant)">Emma::Unicode::HEAVY_X</a></span>, <span class='object_link'><a href="Emma/Unicode.html#QUESTION-constant" title="Emma::Unicode::QUESTION (constant)">Emma::Unicode::QUESTION</a></span>, <span class='object_link'><a href="Emma/Unicode.html#STAR-constant" title="Emma::Unicode::STAR (constant)">Emma::Unicode::STAR</a></span>, <span class='object_link'><a href="Emma/Unicode.html#THIN_SPACE-constant" title="Emma::Unicode::THIN_SPACE (constant)">Emma::Unicode::THIN_SPACE</a></span>, <span class='object_link'><a href="Emma/Unicode.html#TRIANGLE-constant" title="Emma::Unicode::TRIANGLE (constant)">Emma::Unicode::TRIANGLE</a></span>, <span class='object_link'><a href="Emma/Unicode.html#WARNING_SIGN-constant" title="Emma::Unicode::WARNING_SIGN (constant)">Emma::Unicode::WARNING_SIGN</a></span></p>





  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#configuration-class_method" title="configuration (class method)">.<strong>configuration</strong>(*sections)  &#x21d2; Hash{Symbol=&gt;String,Array,Hash} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get configured properties for a file format.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#configuration_section-class_method" title="configuration_section (class method)">.<strong>configuration_section</strong>(section)  &#x21d2; Hash{Symbol=&gt;String,Array,Hash} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get properties from a configuration section.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#configuration_table-class_method" title="configuration_table (class method)">.<strong>configuration_table</strong>  &#x21d2; Hash{Symbol=&gt;Hash} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Configured properties for each file format.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#metadata_fmt-class_method" title="metadata_fmt (class method)">.<strong>metadata_fmt</strong>(fmt)  &#x21d2; Symbol, ... </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>metadata_fmt.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalize_language-class_method" title="normalize_language (class method)">.<strong>normalize_language</strong>(value)  &#x21d2; String<sup>+</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>normalize_language.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#common_metadata-instance_method" title="#common_metadata (instance method)">#<strong>common_metadata</strong>  &#x21d2; Hash{Symbol=&gt;*} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Extracted metadata mapped to common metadata fields.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#configuration-instance_method" title="#configuration (instance method)">#<strong>configuration</strong>  &#x21d2; Hash{Symbol=&gt;String,Array,Hash} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>configuration.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#field_transforms-instance_method" title="#field_transforms (instance method)">#<strong>field_transforms</strong>  &#x21d2; Hash{Symbol=&gt;Hash{Symbol=&gt;Proc,Symbol}} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>field_transforms.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#field_value_array-instance_method" title="#field_value_array (instance method)">#<strong>field_value_array</strong>  &#x21d2; Array&lt;Symbol&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Fields whose values should be provided as an array even if there is only a single value element.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#field_value_separator-instance_method" title="#field_value_separator (instance method)">#<strong>field_value_separator</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Separator between values of a multi-valued field.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format_fields-instance_method" title="#format_fields (instance method)">#<strong>format_fields</strong>  &#x21d2; Hash{Symbol=&gt;Proc,Symbol} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>format_fields.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format_metadata-instance_method" title="#format_metadata (instance method)">#<strong>format_metadata</strong>(info) {|field, accessor, label, value| ... } &#x21d2; Hash{String=&gt;*} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Metadata extracted from the file format instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mapped_metadata-instance_method" title="#mapped_metadata (instance method)">#<strong>mapped_metadata</strong>(info)  &#x21d2; Hash{Symbol=&gt;*} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Map metadata extracted from the file format instance into common metadata fields.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mapped_metadata_fields-instance_method" title="#mapped_metadata_fields (instance method)">#<strong>mapped_metadata_fields</strong>  &#x21d2; Hash{Symbol=&gt;Symbol} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>mapped_metadata_fields.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#metadata-instance_method" title="#metadata (instance method)">#<strong>metadata</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Metadata extracted from the file format instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parser-instance_method" title="#parser (instance method)">#<strong>parser</strong>  &#x21d2; FileParser </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>parser.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parser_metadata-instance_method" title="#parser_metadata (instance method)">#<strong>parser_metadata</strong>  &#x21d2; * </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>parser_metadata.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Emma/Unicode.html" title="Emma::Unicode (module)">Emma::Unicode</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Emma/Unicode.html#char-instance_method" title="Emma::Unicode#char (method)">#char</a></span>, <span class='object_link'><a href="Emma/Unicode.html#pad_char-instance_method" title="Emma::Unicode#pad_char (method)">#pad_char</a></span></p>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="configuration-class_method">
  
    .<strong>configuration</strong>(*sections)  &#x21d2; <tt>Hash{Symbol=&gt;String,Array,Hash}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get configured properties for a file format.  If multiple sections are given each successive section is recursively merged into the previous.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>sections</span>
      
      
        <span class='type'>(<tt>Array&lt;String, Symbol, Hash&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;String,Array,Hash}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


424
425
426
427
428
429
430
431
432
433
434
435
436</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 424</span>

<span class='kw'>def</span> <span class='id identifier rubyid_configuration'>configuration</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_sections'>sections</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_sections'>sections</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
  <span class='kw'>return</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_delete_prefix'>delete_prefix</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>emma.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_configuration_table'>configuration_table</span><span class='lbracket'>[</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>||=</span>
    <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hash'>hash</span><span class='op'>|</span>
      <span class='id identifier rubyid_sections'>sections</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_section'>section</span><span class='op'>|</span>
        <span class='comment'># noinspection RubyYardParamTypeMatch
</span>        <span class='id identifier rubyid_section'>section</span> <span class='op'>=</span> <span class='id identifier rubyid_configuration_section'>configuration_section</span><span class='lparen'>(</span><span class='id identifier rubyid_section'>section</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_section'>section</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_hash'>hash</span><span class='period'>.</span><span class='id identifier rubyid_deep_merge!'>deep_merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_section'>section</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_section'>section</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="configuration_section-class_method">
  
    .<strong>configuration_section</strong>(section)  &#x21d2; <tt>Hash{Symbol=&gt;String,Array,Hash}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get properties from a configuration section.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>section</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;String,Array,Hash}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 444</span>

<span class='kw'>def</span> <span class='id identifier rubyid_configuration_section'>configuration_section</span><span class='lparen'>(</span><span class='id identifier rubyid_section'>section</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_section'>section</span> <span class='op'>=</span> <span class='id identifier rubyid_section'>section</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='id identifier rubyid_section'>section</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>emma.</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_section'>section</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_section'>section</span><span class='period'>.</span><span class='id identifier rubyid_start_with?'>start_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>emma.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'>I18n</span><span class='period'>.</span><span class='id identifier rubyid_t'>t</span><span class='lparen'>(</span><span class='id identifier rubyid_section'>section</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_deep_dup'>deep_dup</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_hash'>hash</span><span class='op'>|</span>
    <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>mimes</span><span class='words_sep'> </span><span class='tstring_content'>exts</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
      <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_presence'>presence</span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>
    <span class='kw'>end</span>
    <span class='qsymbols_beg'>%i[</span><span class='tstring_content'>fields</span><span class='words_sep'> </span><span class='tstring_content'>map</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>
      <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_transform_values!'>transform_values!</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_value'>value</span><span class='op'>|</span>
        <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_wrap'>wrap</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span><span class='period'>.</span><span class='id identifier rubyid_presence'>presence</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>
        <span class='id identifier rubyid_array'>array</span> <span class='op'>?</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_presence'>presence</span> <span class='op'>:</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_hash'>hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="configuration_table-class_method">
  
    .<strong>configuration_table</strong>  &#x21d2; <tt>Hash{Symbol=&gt;Hash}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Configured properties for each file format.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;Hash}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


470
471
472</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 470</span>

<span class='kw'>def</span> <span class='id identifier rubyid_configuration_table'>configuration_table</span>
  <span class='ivar'>@configuration_table</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="metadata_fmt-class_method">
  
    .<strong>metadata_fmt</strong>(fmt)  &#x21d2; <tt>Symbol</tt>, ... 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>metadata_fmt</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>fmt</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


390
391
392
393</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 390</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_metadata_fmt'>metadata_fmt</span><span class='lparen'>(</span><span class='id identifier rubyid_fmt'>fmt</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_type'>type</span> <span class='op'>=</span> <span class='id identifier rubyid_fmt'>fmt</span><span class='op'>&amp;.</span><span class='id identifier rubyid_downcase'>downcase</span>
  <span class='const'><span class='object_link'><a href="#TYPES-constant" title="FileFormat::TYPES (constant)">TYPES</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_type'>type</span> <span class='op'>:</span> <span class='id identifier rubyid_fmt'>fmt</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalize_language-class_method">
  
    .<strong>normalize_language</strong>(value)  &#x21d2; <tt>String</tt><sup>+</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>normalize_language</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


401
402
403
404
405</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 401</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_normalize_language'>normalize_language</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid___method__'>__method__</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
  <span class='comment'># noinspection RubyYardParamTypeMatch
</span>  <span class='const'><span class='object_link'><a href="IsoLanguage.html" title="IsoLanguage (class)">IsoLanguage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_find'><span class='object_link'><a href="IsoLanguage.html#find-class_method" title="IsoLanguage.find (method)">find</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span><span class='op'>&amp;.</span><span class='id identifier rubyid_alpha3'>alpha3</span> <span class='op'>||</span> <span class='id identifier rubyid_value'>value</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="common_metadata-instance_method">
  
    #<strong>common_metadata</strong>  &#x21d2; <tt>Hash{Symbol=&gt;*}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Extracted metadata mapped to common metadata fields.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;*}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 143</span>

<span class='kw'>def</span> <span class='id identifier rubyid_common_metadata'>common_metadata</span>
  <span class='ivar'>@common_metadata</span> <span class='op'>||=</span> <span class='id identifier rubyid_mapped_metadata'>mapped_metadata</span><span class='lparen'>(</span><span class='id identifier rubyid_parser_metadata'>parser_metadata</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="configuration-instance_method">
  
    #<strong>configuration</strong>  &#x21d2; <tt>Hash{Symbol=&gt;String,Array,Hash}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>configuration</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;String,Array,Hash}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_configuration'>configuration</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid___method__'>__method__</span><span class='embexpr_end'>}</span><span class='tstring_content'> not defined</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="field_transforms-instance_method">
  
    #<strong>field_transforms</strong>  &#x21d2; <tt>Hash{Symbol=&gt;Hash{Symbol=&gt;Proc,Symbol}}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>field_transforms</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;Hash{Symbol=&gt;Proc,Symbol}}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


286
287
288</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 286</span>

<span class='kw'>def</span> <span class='id identifier rubyid_field_transforms'>field_transforms</span>
  <span class='const'><span class='object_link'><a href="#FIELD_TRANSFORMS-constant" title="FileFormat::FIELD_TRANSFORMS (constant)">FIELD_TRANSFORMS</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="field_value_array-instance_method">
  
    #<strong>field_value_array</strong>  &#x21d2; <tt>Array&lt;Symbol&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Fields whose values should be provided as an array even if there is only a single value element.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Symbol&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


295
296
297</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 295</span>

<span class='kw'>def</span> <span class='id identifier rubyid_field_value_array'>field_value_array</span>
  <span class='const'><span class='object_link'><a href="#FIELD_ALWAYS_ARRAY-constant" title="FileFormat::FIELD_ALWAYS_ARRAY (constant)">FIELD_ALWAYS_ARRAY</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="field_value_separator-instance_method">
  
    #<strong>field_value_separator</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Separator between values of a multi-valued field.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


264
265
266</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 264</span>

<span class='kw'>def</span> <span class='id identifier rubyid_field_value_separator'>field_value_separator</span>
  <span class='const'><span class='object_link'><a href="#FILE_FORMAT_SEP-constant" title="FileFormat::FILE_FORMAT_SEP (constant)">FILE_FORMAT_SEP</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="format_fields-instance_method">
  
    #<strong>format_fields</strong>  &#x21d2; <tt>Hash{Symbol=&gt;Proc,Symbol}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>format_fields</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;Proc,Symbol}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 278</span>

<span class='kw'>def</span> <span class='id identifier rubyid_format_fields'>format_fields</span>
  <span class='ivar'>@format_fields</span> <span class='op'>||=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class_eval'>class_eval</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_const_get'>const_get</span><span class='lparen'>(</span><span class='symbol'>:FORMAT_FIELDS</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="format_metadata-instance_method">
  
    #<strong>format_metadata</strong>(info) {|field, accessor, label, value| ... } &#x21d2; <tt>Hash{String=&gt;*}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Metadata extracted from the file format instance.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>info</span>
      
      
        <span class='type'>(<tt>*</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Information supplied by the subclass.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>field</tt>, <tt>accessor</tt>, <tt>label</tt>, <tt>value</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Per-field processing by caller.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>field</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>accessor</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>Proc</tt>, <tt>Array</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>label</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>(String,Array)</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Pass back label/value pair.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{String=&gt;*}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 166</span>

<span class='kw'>def</span> <span class='id identifier rubyid_format_metadata'>format_metadata</span><span class='lparen'>(</span><span class='id identifier rubyid_info'>info</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='comment'># @type [Symbol]      field
</span>  <span class='comment'># @type [Symbol,Proc] accessor
</span>  <span class='id identifier rubyid_format_fields'>format_fields</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_accessor'>accessor</span><span class='op'>|</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_apply_field_accessor'>apply_field_accessor</span><span class='lparen'>(</span><span class='id identifier rubyid_info'>info</span><span class='comma'>,</span> <span class='id identifier rubyid_accessor'>accessor</span><span class='rparen'>)</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_apply_field_transform'>apply_field_transform</span><span class='lparen'>(</span><span class='symbol'>:field</span><span class='comma'>,</span> <span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_apply_field_transform'>apply_field_transform</span><span class='lparen'>(</span><span class='symbol'>:accessor</span><span class='comma'>,</span> <span class='id identifier rubyid_accessor'>accessor</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_label'>label</span> <span class='op'>=</span> <span class='id identifier rubyid_field'>field</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_titleize'>titleize</span>
    <span class='id identifier rubyid_label'>label</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='comma'>,</span> <span class='id identifier rubyid_accessor'>accessor</span><span class='comma'>,</span> <span class='id identifier rubyid_label'>label</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_label'>label</span> <span class='op'>=</span> <span class='id identifier rubyid_label'>label</span><span class='period'>.</span><span class='id identifier rubyid_pluralize'>pluralize</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='id identifier rubyid_field_value_array'>field_value_array</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_field'>field</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_field_value_separator'>field_value_separator</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_array'>array</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mapped_metadata-instance_method">
  
    #<strong>mapped_metadata</strong>(info)  &#x21d2; <tt>Hash{Symbol=&gt;*}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Map metadata extracted from the file format instance into common metadata fields.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>info</span>
      
      
        <span class='type'>(<tt>*</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Information supplied by the subclass.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;*}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194
195
196
197
198
199
200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 191</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mapped_metadata'>mapped_metadata</span><span class='lparen'>(</span><span class='id identifier rubyid_info'>info</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_info'>info</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='comment'># @type [Symbol] format_field
</span>  <span class='comment'># @type [Symbol] mapped_field
</span>  <span class='id identifier rubyid_mapped_metadata_fields'>mapped_metadata_fields</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_format_field'>format_field</span><span class='comma'>,</span> <span class='id identifier rubyid_mapped_field'>mapped_field</span><span class='op'>|</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_apply_field_accessor'>apply_field_accessor</span><span class='lparen'>(</span><span class='id identifier rubyid_info'>info</span><span class='comma'>,</span> <span class='id identifier rubyid_format_field'>format_field</span><span class='rparen'>)</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_key'>key</span>   <span class='op'>=</span> <span class='id identifier rubyid_mapped_field'>mapped_field</span>
    <span class='id identifier rubyid_value'>value</span> <span class='op'>=</span> <span class='id identifier rubyid_apply_field_transform'>apply_field_transform</span><span class='lparen'>(</span><span class='symbol'>:accessor</span><span class='comma'>,</span> <span class='id identifier rubyid_format_field'>format_field</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mapped_metadata_fields-instance_method">
  
    #<strong>mapped_metadata_fields</strong>  &#x21d2; <tt>Hash{Symbol=&gt;Symbol}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>mapped_metadata_fields</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol=&gt;Symbol}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 303</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mapped_metadata_fields'>mapped_metadata_fields</span>
  <span class='ivar'>@mapped_metadata_fields</span> <span class='op'>||=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class_eval'>class_eval</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_const_get'>const_get</span><span class='lparen'>(</span><span class='symbol'>:FIELD_MAP</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="metadata-instance_method">
  
    #<strong>metadata</strong>  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Metadata extracted from the file format instance.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_metadata'>metadata</span>
  <span class='ivar'>@metadata</span> <span class='op'>||=</span> <span class='id identifier rubyid_format_metadata'>format_metadata</span><span class='lparen'>(</span><span class='id identifier rubyid_parser_metadata'>parser_metadata</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parser-instance_method">
  
    #<strong>parser</strong>  &#x21d2; <tt><span class='object_link'><a href="FileParser.html" title="FileParser (class)">FileParser</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>parser</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="FileParser.html" title="FileParser (class)">FileParser</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 119</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parser'>parser</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid___method__'>__method__</span><span class='embexpr_end'>}</span><span class='tstring_content'> not defined</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parser_metadata-instance_method">
  
    #<strong>parser_metadata</strong>  &#x21d2; <tt>*</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>parser_metadata</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>*</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Type is specific to the subclass.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/concerns/file_format.rb', line 127</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parser_metadata'>parser_metadata</span>
  <span class='ivar'>@parser_metadata</span> <span class='op'>||=</span> <span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Jan 25 14:07:34 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.2).
</div>

    </div>
  </body>
</html>