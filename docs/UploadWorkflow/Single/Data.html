<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: UploadWorkflow::Single::Data
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "UploadWorkflow::Single::Data";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../UploadWorkflow.html" title="UploadWorkflow (class)">UploadWorkflow</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Single.html" title="UploadWorkflow::Single (class)">Single</a></span></span>
     &raquo; 
    <span class="title">Data</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: UploadWorkflow::Single::Data
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../../Emma/Json.html" title="Emma::Json (module)">Emma::Json</a></span>, <span class='object_link'><a href="../Data.html" title="UploadWorkflow::Data (module)">Data</a></span>, <span class='object_link'><a href="External.html" title="UploadWorkflow::Single::External (module)">External</a></span></dd>
  </dl>
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="Actions.html" title="UploadWorkflow::Single::Actions (module)">Actions</a></span>, <span class='object_link'><a href="Create/Data.html" title="UploadWorkflow::Single::Create::Data (module)">Create::Data</a></span>, <span class='object_link'><a href="Edit/Data.html" title="UploadWorkflow::Single::Edit::Data (module)">Edit::Data</a></span>, <span class='object_link'><a href="Remove/Data.html" title="UploadWorkflow::Single::Remove::Data (module)">Remove::Data</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/upload_workflow/single.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Workflow execution status information specific to single-item workflows.</p>


  </div>
</div>
<div class="tags">
  

</div>


  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../../Emma/Common.html" title="Emma::Common (module)">Emma::Common</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Emma/Common.html#BOOLEAN_VALUES-constant" title="Emma::Common::BOOLEAN_VALUES (constant)">Emma::Common::BOOLEAN_VALUES</a></span>, <span class='object_link'><a href="../../Emma/Common.html#HTML_QUOTES-constant" title="Emma::Common::HTML_QUOTES (constant)">Emma::Common::HTML_QUOTES</a></span>, <span class='object_link'><a href="../../Emma/Common.html#INFLECT_PLURAL-constant" title="Emma::Common::INFLECT_PLURAL (constant)">Emma::Common::INFLECT_PLURAL</a></span>, <span class='object_link'><a href="../../Emma/Common.html#INFLECT_SINGULAR-constant" title="Emma::Common::INFLECT_SINGULAR (constant)">Emma::Common::INFLECT_SINGULAR</a></span>, <span class='object_link'><a href="../../Emma/Common.html#LIST_SEPARATOR-constant" title="Emma::Common::LIST_SEPARATOR (constant)">Emma::Common::LIST_SEPARATOR</a></span>, <span class='object_link'><a href="../../Emma/Common.html#PAIR_SEPARATOR-constant" title="Emma::Common::PAIR_SEPARATOR (constant)">Emma::Common::PAIR_SEPARATOR</a></span>, <span class='object_link'><a href="../../Emma/Common.html#QUOTE_MARKS-constant" title="Emma::Common::QUOTE_MARKS (constant)">Emma::Common::QUOTE_MARKS</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../Errors.html" title="UploadWorkflow::Errors (module)">Errors</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Errors.html#DEFAULT_ERROR_MESSAGE-constant" title="UploadWorkflow::Errors::DEFAULT_ERROR_MESSAGE (constant)">Errors::DEFAULT_ERROR_MESSAGE</a></span>, <span class='object_link'><a href="../Errors.html#INTERNAL_EXCEPTION-constant" title="UploadWorkflow::Errors::INTERNAL_EXCEPTION (constant)">Errors::INTERNAL_EXCEPTION</a></span>, <span class='object_link'><a href="../Errors.html#UPLOAD_ERROR-constant" title="UploadWorkflow::Errors::UPLOAD_ERROR (constant)">Errors::UPLOAD_ERROR</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../Errors/RenderMethods.html" title="UploadWorkflow::Errors::RenderMethods (module)">Errors::RenderMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Errors/RenderMethods.html#DEFAULT_LABEL-constant" title="UploadWorkflow::Errors::RenderMethods::DEFAULT_LABEL (constant)">Errors::RenderMethods::DEFAULT_LABEL</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../../Emma/Debug.html" title="Emma::Debug (module)">Emma::Debug</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Emma/Debug.html#DEBUG_SEPARATOR-constant" title="Emma::Debug::DEBUG_SEPARATOR (constant)">Emma::Debug::DEBUG_SEPARATOR</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../Properties.html" title="UploadWorkflow::Properties (module)">Properties</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Properties.html#BATCH_SIZE-constant" title="UploadWorkflow::Properties::BATCH_SIZE (constant)">Properties::BATCH_SIZE</a></span>, <span class='object_link'><a href="../Properties.html#BATCH_SIZE_DEFAULT-constant" title="UploadWorkflow::Properties::BATCH_SIZE_DEFAULT (constant)">Properties::BATCH_SIZE_DEFAULT</a></span>, <span class='object_link'><a href="../Properties.html#DEV_TITLE_PREFIX-constant" title="UploadWorkflow::Properties::DEV_TITLE_PREFIX (constant)">Properties::DEV_TITLE_PREFIX</a></span>, <span class='object_link'><a href="../Properties.html#EMERGENCY_DELETE_DEFAULT-constant" title="UploadWorkflow::Properties::EMERGENCY_DELETE_DEFAULT (constant)">Properties::EMERGENCY_DELETE_DEFAULT</a></span>, <span class='object_link'><a href="../Properties.html#FORCE_DELETE_DEFAULT-constant" title="UploadWorkflow::Properties::FORCE_DELETE_DEFAULT (constant)">Properties::FORCE_DELETE_DEFAULT</a></span>, <span class='object_link'><a href="../Properties.html#INGEST_MAX_SIZE-constant" title="UploadWorkflow::Properties::INGEST_MAX_SIZE (constant)">Properties::INGEST_MAX_SIZE</a></span>, <span class='object_link'><a href="../Properties.html#MAX_BATCH_SIZE-constant" title="UploadWorkflow::Properties::MAX_BATCH_SIZE (constant)">Properties::MAX_BATCH_SIZE</a></span>, <span class='object_link'><a href="../Properties.html#REPO_CREATE_DEFAULT-constant" title="UploadWorkflow::Properties::REPO_CREATE_DEFAULT (constant)">Properties::REPO_CREATE_DEFAULT</a></span>, <span class='object_link'><a href="../Properties.html#REPO_EDIT_DEFAULT-constant" title="UploadWorkflow::Properties::REPO_EDIT_DEFAULT (constant)">Properties::REPO_EDIT_DEFAULT</a></span>, <span class='object_link'><a href="../Properties.html#REPO_REMOVE_DEFAULT-constant" title="UploadWorkflow::Properties::REPO_REMOVE_DEFAULT (constant)">Properties::REPO_REMOVE_DEFAULT</a></span>, <span class='object_link'><a href="../Properties.html#THROTTLE_PAUSE-constant" title="UploadWorkflow::Properties::THROTTLE_PAUSE (constant)">Properties::THROTTLE_PAUSE</a></span>, <span class='object_link'><a href="../Properties.html#TITLE_PREFIX-constant" title="UploadWorkflow::Properties::TITLE_PREFIX (constant)">Properties::TITLE_PREFIX</a></span>, <span class='object_link'><a href="../Properties.html#TRUNCATE_DELETE_DEFAULT-constant" title="UploadWorkflow::Properties::TRUNCATE_DELETE_DEFAULT (constant)">Properties::TRUNCATE_DELETE_DEFAULT</a></span>, <span class='object_link'><a href="../Properties.html#WF_URL_PARAMETER-constant" title="UploadWorkflow::Properties::WF_URL_PARAMETER (constant)">Properties::WF_URL_PARAMETER</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../External.html" title="UploadWorkflow::External (module)">External</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../External.html#DISABLE_UPLOAD_INDEX_UPDATE-constant" title="UploadWorkflow::External::DISABLE_UPLOAD_INDEX_UPDATE (constant)">External::DISABLE_UPLOAD_INDEX_UPDATE</a></span>, <span class='object_link'><a href="../External.html#REPO_FAILURE-constant" title="UploadWorkflow::External::REPO_FAILURE (constant)">External::REPO_FAILURE</a></span></p>


  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#record-instance_method" title="#record (instance method)">#<strong>record</strong>  &#x21d2; Upload<sup>?</sup> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The Upload record associated with this workflow.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="Simulation.html" title="UploadWorkflow::Single::Simulation (module)">Simulation</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Simulation.html#submission-instance_method" title="UploadWorkflow::Single::Simulation#submission (method)">#submission</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#complete%3F-instance_method" title="#complete? (instance method)">#<strong>complete?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Indicate whether the item is valid.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_record-instance_method" title="#create_record (instance method)">#<strong>create_record</strong>(data = nil)  &#x21d2; Upload<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new Upload record.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">#<strong>empty?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Indicate whether a record has been assigned.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#existing_record-instance_method" title="#existing_record (instance method)">#<strong>existing_record</strong>  &#x21d2; Boolean<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Indicate whether a record was originally created by (or on behalf of) the workflow (as opposed to an existing record acquired from the database).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#file_valid%3F-instance_method" title="#file_valid? (instance method)">#<strong>file_valid?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Indicate whether the record is associated with an uploaded file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#metadata_valid%3F-instance_method" title="#metadata_valid? (instance method)">#<strong>metadata_valid?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Indicate whether the EMMA metadata associated with the record is valid.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_record-instance_method" title="#reset_record (instance method)">#<strong>reset_record</strong>(data = nil)  &#x21d2; Upload<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clear the fields in an existing Upload record.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#results-instance_method" title="#results (instance method)">#<strong>results</strong>  &#x21d2; (Integer,Hash,Array&lt;String&gt;), ... </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The characteristic “return value” of the workflow after an event has been registered.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_data-instance_method" title="#set_data (instance method)">#<strong>set_data</strong>(data)  &#x21d2; Upload<sup>?</sup> </a>
    

    
      (also: #set_record)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If #record is <strong>nil</strong> then create it using <strong>data</strong>; otherwise update it using <strong>data</strong>.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../Emma/Json.html" title="Emma::Json (module)">Emma::Json</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Emma/Json.html#json_parse-instance_method" title="Emma::Json#json_parse (method)">#json_parse</a></span>, <span class='object_link'><a href="../../Emma/Json.html#pretty_json-instance_method" title="Emma::Json#pretty_json (method)">#pretty_json</a></span>, <span class='object_link'><a href="../../Emma/Json.html#safe_json_parse-instance_method" title="Emma::Json#safe_json_parse (method)">#safe_json_parse</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../Emma/Common.html" title="Emma::Common (module)">Emma::Common</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Emma/Common.html#array_string-instance_method" title="Emma::Common#array_string (method)">#array_string</a></span>, <span class='object_link'><a href="../../Emma/Common.html#boolean%3F-instance_method" title="Emma::Common#boolean? (method)">#boolean?</a></span>, <span class='object_link'><a href="../../Emma/Common.html#build_query_options-instance_method" title="Emma::Common#build_query_options (method)">#build_query_options</a></span>, <span class='object_link'><a href="../../Emma/Common.html#calling_method-instance_method" title="Emma::Common#calling_method (method)">#calling_method</a></span>, <span class='object_link'><a href="../../Emma/Common.html#digits_only%3F-instance_method" title="Emma::Common#digits_only? (method)">#digits_only?</a></span>, <span class='object_link'><a href="../../Emma/Common.html#get_method-instance_method" title="Emma::Common#get_method (method)">#get_method</a></span>, <span class='object_link'><a href="../../Emma/Common.html#get_params-instance_method" title="Emma::Common#get_params (method)">#get_params</a></span>, <span class='object_link'><a href="../../Emma/Common.html#hash_string-instance_method" title="Emma::Common#hash_string (method)">#hash_string</a></span>, <span class='object_link'><a href="../../Emma/Common.html#html_id-instance_method" title="Emma::Common#html_id (method)">#html_id</a></span>, <span class='object_link'><a href="../../Emma/Common.html#inflection-instance_method" title="Emma::Common#inflection (method)">#inflection</a></span>, <span class='object_link'><a href="../../Emma/Common.html#labelize-instance_method" title="Emma::Common#labelize (method)">#labelize</a></span>, <span class='object_link'><a href="../../Emma/Common.html#make_path-instance_method" title="Emma::Common#make_path (method)">#make_path</a></span>, <span class='object_link'><a href="../../Emma/Common.html#named_format_references-instance_method" title="Emma::Common#named_format_references (method)">#named_format_references</a></span>, <span class='object_link'><a href="../../Emma/Common.html#non_breaking-instance_method" title="Emma::Common#non_breaking (method)">#non_breaking</a></span>, <span class='object_link'><a href="../../Emma/Common.html#non_negative-instance_method" title="Emma::Common#non_negative (method)">#non_negative</a></span>, <span class='object_link'><a href="../../Emma/Common.html#normalized_list-instance_method" title="Emma::Common#normalized_list (method)">#normalized_list</a></span>, <span class='object_link'><a href="../../Emma/Common.html#partition_options-instance_method" title="Emma::Common#partition_options (method)">#partition_options</a></span>, <span class='object_link'><a href="../../Emma/Common.html#positive-instance_method" title="Emma::Common#positive (method)">#positive</a></span>, <span class='object_link'><a href="../../Emma/Common.html#quote-instance_method" title="Emma::Common#quote (method)">#quote</a></span>, <span class='object_link'><a href="../../Emma/Common.html#reject_blanks-instance_method" title="Emma::Common#reject_blanks (method)">#reject_blanks</a></span>, <span class='object_link'><a href="../../Emma/Common.html#sanitized_string-instance_method" title="Emma::Common#sanitized_string (method)">#sanitized_string</a></span>, <span class='object_link'><a href="../../Emma/Common.html#strip_quotes-instance_method" title="Emma::Common#strip_quotes (method)">#strip_quotes</a></span>, <span class='object_link'><a href="../../Emma/Common.html#url_escape-instance_method" title="Emma::Common#url_escape (method)">#url_escape</a></span>, <span class='object_link'><a href="../../Emma/Common.html#url_query-instance_method" title="Emma::Common#url_query (method)">#url_query</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Simulation.html" title="UploadWorkflow::Single::Simulation (module)">Simulation</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Simulation.html#set_submission-instance_method" title="UploadWorkflow::Single::Simulation#set_submission (method)">#set_submission</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Errors.html" title="UploadWorkflow::Errors (module)">Errors</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Errors.html#failure-instance_method" title="UploadWorkflow::Errors#failure (method)">#failure</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Errors/RenderMethods.html" title="UploadWorkflow::Errors::RenderMethods (module)">Errors::RenderMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Errors/RenderMethods.html#make_label-instance_method" title="UploadWorkflow::Errors::RenderMethods#make_label (method)">#make_label</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../Emma/Debug.html" title="Emma::Debug (module)">Emma::Debug</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Emma/Debug.html#__debug_args-instance_method" title="Emma::Debug#__debug_args (method)">#__debug_args</a></span>, <span class='object_link'><a href="../../Emma/Debug.html#__debug_env_hash-instance_method" title="Emma::Debug#__debug_env_hash (method)">#__debug_env_hash</a></span>, <span class='object_link'><a href="../../Emma/Debug.html#__debug_exception-instance_method" title="Emma::Debug#__debug_exception (method)">#__debug_exception</a></span>, <span class='object_link'><a href="../../Emma/Debug.html#__debug_header_hash-instance_method" title="Emma::Debug#__debug_header_hash (method)">#__debug_header_hash</a></span>, <span class='object_link'><a href="../../Emma/Debug.html#__debug_items-instance_method" title="Emma::Debug#__debug_items (method)">#__debug_items</a></span>, <span class='object_link'><a href="../../Emma/Debug.html#__debug_label-instance_method" title="Emma::Debug#__debug_label (method)">#__debug_label</a></span>, <span class='object_link'><a href="../../Emma/Debug.html#__debug_line-instance_method" title="Emma::Debug#__debug_line (method)">#__debug_line</a></span>, <span class='object_link'><a href="../../Emma/Debug.html#__debug_request-instance_method" title="Emma::Debug#__debug_request (method)">#__debug_request</a></span>, <span class='object_link'><a href="../../Emma/Debug.html#__debug_route-instance_method" title="Emma::Debug#__debug_route (method)">#__debug_route</a></span>, <span class='object_link'><a href="../../Emma/Debug.html#__debug_route_label-instance_method" title="Emma::Debug#__debug_route_label (method)">#__debug_route_label</a></span>, <span class='object_link'><a href="../../Emma/Debug.html#__debug_session_hash-instance_method" title="Emma::Debug#__debug_session_hash (method)">#__debug_session_hash</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Properties.html" title="UploadWorkflow::Properties (module)">Properties</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Properties.html#batch_size-instance_method" title="UploadWorkflow::Properties#batch_size (method)">#batch_size</a></span>, <span class='object_link'><a href="../Properties.html#emergency_delete-instance_method" title="UploadWorkflow::Properties#emergency_delete (method)">#emergency_delete</a></span>, <span class='object_link'><a href="../Properties.html#force_delete-instance_method" title="UploadWorkflow::Properties#force_delete (method)">#force_delete</a></span>, <span class='object_link'><a href="../Properties.html#repo_create-instance_method" title="UploadWorkflow::Properties#repo_create (method)">#repo_create</a></span>, <span class='object_link'><a href="../Properties.html#repo_edit-instance_method" title="UploadWorkflow::Properties#repo_edit (method)">#repo_edit</a></span>, <span class='object_link'><a href="../Properties.html#repo_remove-instance_method" title="UploadWorkflow::Properties#repo_remove (method)">#repo_remove</a></span>, <span class='object_link'><a href="../Properties.html#title_prefix-instance_method" title="UploadWorkflow::Properties#title_prefix (method)">#title_prefix</a></span>, <span class='object_link'><a href="../Properties.html#truncate_delete-instance_method" title="UploadWorkflow::Properties#truncate_delete (method)">#truncate_delete</a></span></p>

  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../External.html" title="UploadWorkflow::External (module)">External</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../External.html#add_to_index-instance_method" title="UploadWorkflow::External#add_to_index (method)">#add_to_index</a></span>, <span class='object_link'><a href="../External.html#aws_api-instance_method" title="UploadWorkflow::External#aws_api (method)">#aws_api</a></span>, <span class='object_link'><a href="../External.html#batch_repository_remove-instance_method" title="UploadWorkflow::External#batch_repository_remove (method)">#batch_repository_remove</a></span>, <span class='object_link'><a href="../External.html#batch_repository_request-instance_method" title="UploadWorkflow::External#batch_repository_request (method)">#batch_repository_request</a></span>, <span class='object_link'><a href="../External.html#db_delete-instance_method" title="UploadWorkflow::External#db_delete (method)">#db_delete</a></span>, <span class='object_link'><a href="../External.html#db_insert-instance_method" title="UploadWorkflow::External#db_insert (method)">#db_insert</a></span>, <span class='object_link'><a href="../External.html#db_update-instance_method" title="UploadWorkflow::External#db_update (method)">#db_update</a></span>, <span class='object_link'><a href="../External.html#emma_item%3F-instance_method" title="UploadWorkflow::External#emma_item? (method)">#emma_item?</a></span>, <span class='object_link'><a href="../External.html#find_records-instance_method" title="UploadWorkflow::External#find_records (method)">#find_records</a></span>, <span class='object_link'><a href="../External.html#get_record-instance_method" title="UploadWorkflow::External#get_record (method)">#get_record</a></span>, <span class='object_link'><a href="../External.html#identifier-instance_method" title="UploadWorkflow::External#identifier (method)">#identifier</a></span>, <span class='object_link'><a href="../External.html#identifiers-instance_method" title="UploadWorkflow::External#identifiers (method)">#identifiers</a></span>, <span class='object_link'><a href="../External.html#ingest_api-instance_method" title="UploadWorkflow::External#ingest_api (method)">#ingest_api</a></span>, <span class='object_link'><a href="../External.html#new_record-instance_method" title="UploadWorkflow::External#new_record (method)">#new_record</a></span>, <span class='object_link'><a href="../External.html#remove_from_index-instance_method" title="UploadWorkflow::External#remove_from_index (method)">#remove_from_index</a></span>, <span class='object_link'><a href="../External.html#repository_create-instance_method" title="UploadWorkflow::External#repository_create (method)">#repository_create</a></span>, <span class='object_link'><a href="../External.html#repository_edit-instance_method" title="UploadWorkflow::External#repository_edit (method)">#repository_edit</a></span>, <span class='object_link'><a href="../External.html#repository_remove-instance_method" title="UploadWorkflow::External#repository_remove (method)">#repository_remove</a></span>, <span class='object_link'><a href="../External.html#skip_index_ingest-instance_method" title="UploadWorkflow::External#skip_index_ingest (method)">#skip_index_ingest</a></span>, <span class='object_link'><a href="../External.html#update_in_index-instance_method" title="UploadWorkflow::External#update_in_index (method)">#update_in_index</a></span>, <span class='object_link'><a href="../External.html#upload_create-instance_method" title="UploadWorkflow::External#upload_create (method)">#upload_create</a></span>, <span class='object_link'><a href="../External.html#upload_edit-instance_method" title="UploadWorkflow::External#upload_edit (method)">#upload_edit</a></span>, <span class='object_link'><a href="../External.html#upload_remove-instance_method" title="UploadWorkflow::External#upload_remove (method)">#upload_remove</a></span></p>

  
  
  
  
  
  
  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="record-instance_method">
  
    #<strong>record</strong>  &#x21d2; <tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt><sup>?</sup>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The Upload record associated with this workflow.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_record'>record</span>
  <span class='ivar'>@record</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="complete?-instance_method">
  
    #<strong>complete?</strong>  &#x21d2; <tt><span class='object_link'><a href="../../top-level-namespace.html#Boolean-constant" title="Boolean (constant)">Boolean</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Indicate whether the item is valid.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../top-level-namespace.html#Boolean-constant" title="Boolean (constant)">Boolean</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single.rb', line 278</span>

<span class='kw'>def</span> <span class='id identifier rubyid_complete?'>complete?</span>
  <span class='kw'>super</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_file_valid?'>file_valid?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_metadata_valid?'>metadata_valid?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_record-instance_method">
  
    #<strong>create_record</strong>(data = nil)  &#x21d2; <tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new Upload record.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>data</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt>, <tt>Hash</tt>, <tt>String</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single.rb', line 233</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_record'>create_record</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_record'>set_record</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="empty?-instance_method">
  
    #<strong>empty?</strong>  &#x21d2; <tt><span class='object_link'><a href="../../top-level-namespace.html#Boolean-constant" title="Boolean (constant)">Boolean</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Indicate whether a record has been assigned.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../top-level-namespace.html#Boolean-constant" title="Boolean (constant)">Boolean</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


272
273
274</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single.rb', line 272</span>

<span class='kw'>def</span> <span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>super</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="existing_record-instance_method">
  
    #<strong>existing_record</strong>  &#x21d2; <tt><span class='object_link'><a href="../../top-level-namespace.html#Boolean-constant" title="Boolean (constant)">Boolean</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Indicate whether a record was originally created by (or on behalf of) the workflow (as opposed to an existing record acquired from the database).</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../top-level-namespace.html#Boolean-constant" title="Boolean (constant)">Boolean</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single.rb', line 242</span>

<span class='kw'>def</span> <span class='id identifier rubyid_existing_record'>existing_record</span>
  <span class='ivar'>@existing</span> <span class='op'>||=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="file_valid?-instance_method">
  
    #<strong>file_valid?</strong>  &#x21d2; <tt><span class='object_link'><a href="../../top-level-namespace.html#Boolean-constant" title="Boolean (constant)">Boolean</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Indicate whether the record is associated with an uploaded file.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../top-level-namespace.html#Boolean-constant" title="Boolean (constant)">Boolean</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single.rb', line 254</span>

<span class='kw'>def</span> <span class='id identifier rubyid_file_valid?'>file_valid?</span>
  <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_file_attacher'>file_attacher</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="metadata_valid?-instance_method">
  
    #<strong>metadata_valid?</strong>  &#x21d2; <tt><span class='object_link'><a href="../../top-level-namespace.html#Boolean-constant" title="Boolean (constant)">Boolean</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Indicate whether the EMMA metadata associated with the record is valid.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../top-level-namespace.html#Boolean-constant" title="Boolean (constant)">Boolean</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


260
261
262</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single.rb', line 260</span>

<span class='kw'>def</span> <span class='id identifier rubyid_metadata_valid?'>metadata_valid?</span>
  <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_valid?'>valid?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset_record-instance_method">
  
    #<strong>reset_record</strong>(data = nil)  &#x21d2; <tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clear the fields in an existing Upload record.</p>

<p>– noinspection RubyNilAnalysis, RubyYardParamTypeMatch ++</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>data</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt>, <tt>Hash</tt>, <tt>String</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single.rb', line 204</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset_record'>reset_record</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_sid'>sid</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='comment'># noinspection RubyCaseWithoutElseBlockInspection
</span>  <span class='kw'>case</span> <span class='id identifier rubyid_data'>data</span>
    <span class='kw'>when</span> <span class='const'><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></span>
      <span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> <span class='kw'>or</span> <span class='lparen'>(</span><span class='id identifier rubyid_sid'>sid</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_submission_id'>submission_id</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_symbolize_keys'>symbolize_keys</span><span class='period'>.</span><span class='id identifier rubyid_except'>except</span><span class='lparen'>(</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:submission_id</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>Hash</span>
      <span class='id identifier rubyid_ids'>ids</span><span class='comma'>,</span> <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='id identifier rubyid_partition_options'>partition_options</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_symbolize_keys'>symbolize_keys</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:submission_id</span><span class='rparen'>)</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_ids'>ids</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>or</span> <span class='lparen'>(</span><span class='id identifier rubyid_sid'>sid</span> <span class='op'>=</span> <span class='id identifier rubyid_ids'>ids</span><span class='lbracket'>[</span><span class='symbol'>:submission_id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>String</span>
      <span class='id identifier rubyid_digits_only?'>digits_only?</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='lparen'>(</span><span class='id identifier rubyid_sid'>sid</span> <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_id'>id</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_sid'>sid</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_record'>record</span>
    <span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> <span class='kw'>or</span> <span class='lparen'>(</span><span class='id identifier rubyid_sid'>sid</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_submission_id'>submission_id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:reset</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>?</span> <span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='lbracket'>[</span><span class='symbol'>:submission_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_sid'>sid</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_record'>set_record</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="results-instance_method">
  
    #<strong>results</strong>  &#x21d2; <tt>(Integer,Hash,Array&lt;String&gt;)</tt>, ... 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The characteristic “return value” of the workflow after an event has been registered.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>(Integer,Hash,Array&lt;String&gt;)</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>For :validating, :replacing</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span>,String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>For :removing, :removed</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>For all other states</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_results'>results</span>
  <span class='ivar'>@results</span> <span class='op'>||=</span> <span class='id identifier rubyid_record'>record</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_data-instance_method">
  
    #<strong>set_data</strong>(data)  &#x21d2; <tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt><sup>?</sup> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='set_record-instance_method'>set_record</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If #record is <strong>nil</strong> then create it using <strong>data</strong>; otherwise update it using <strong>data</strong>.</p>

<p>– noinspection RubyNilAnalysis, RubyYardParamTypeMatch, RubyYardReturnMatch ++</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>data</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt>, <tt>Hash</tt>, <tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_data'>set_data</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='kw'>super</span>

  <span class='ivar'>@existing</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_failed'>failed</span>    <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='comment'># The semantics depend on whether a record has already been created or not.
</span>  <span class='kw'>if</span> <span class='ivar'>@record</span>

    <span class='comment'># Update the existing record with the provided data.
</span>    <span class='ivar'>@existing</span> <span class='op'>=</span> <span class='op'>!</span><span class='ivar'>@record</span><span class='period'>.</span><span class='id identifier rubyid_new_record?'>new_record?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='const'><span class='object_link'><a href="../../top-level-namespace.html#Log-constant" title="Log (constant)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid___method__'>__method__</span><span class='embexpr_end'>}</span><span class='tstring_content'>: nil ignored for existing record</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
      <span class='const'><span class='object_link'><a href="../../top-level-namespace.html#Log-constant" title="Log (constant)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid___method__'>__method__</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_content'> invalid for existing record</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_failed'>failed</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>INTERNAL ERROR: data class </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># TODO: I18n
</span>    <span class='kw'>else</span>
      <span class='id identifier rubyid_opt'>opt</span> <span class='op'>=</span> <span class='id identifier rubyid_record_data'>record_data</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
      <span class='ivar'>@record</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>else</span>

    <span class='comment'># Retrieve (or create) the record in the database table.
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../Upload.html" title="Upload (class)">Upload</a></span></span><span class='rparen'>)</span>
      <span class='ivar'>@record</span>   <span class='op'>=</span> <span class='id identifier rubyid_data'>data</span>
      <span class='ivar'>@existing</span> <span class='op'>=</span> <span class='op'>!</span><span class='ivar'>@record</span><span class='period'>.</span><span class='id identifier rubyid_new_record?'>new_record?</span>

    <span class='kw'>elsif</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_opt'>opt</span> <span class='op'>=</span> <span class='id identifier rubyid_record_data'>record_data</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
      <span class='ivar'>@record</span><span class='comma'>,</span> <span class='id identifier rubyid_failed'>failed</span> <span class='op'>=</span> <span class='id identifier rubyid_upload_edit'>upload_edit</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='ivar'>@record</span>
        <span class='ivar'>@existing</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='kw'>else</span>
        <span class='ivar'>@record</span><span class='comma'>,</span> <span class='id identifier rubyid_failed'>failed</span> <span class='op'>=</span> <span class='id identifier rubyid_upload_create'>upload_create</span><span class='lparen'>(</span><span class='op'>**</span><span class='id identifier rubyid_opt'>opt</span><span class='rparen'>)</span>
        <span class='ivar'>@existing</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='ivar'>@record</span>
      <span class='kw'>end</span>

    <span class='kw'>elsif</span> <span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='id identifier rubyid_attribute'>attribute</span> <span class='op'>=</span> <span class='id identifier rubyid_digits_only?'>digits_only?</span><span class='lparen'>(</span><span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='symbol'>:id</span> <span class='op'>:</span> <span class='symbol'>:submission_id</span>
      <span class='ivar'>@record</span><span class='comma'>,</span> <span class='id identifier rubyid_failed'>failed</span> <span class='op'>=</span> <span class='id identifier rubyid_upload_edit'>upload_edit</span><span class='lparen'>(</span><span class='id identifier rubyid_attribute'>attribute</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_data'>data</span><span class='rparen'>)</span>
      <span class='ivar'>@existing</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@record</span>

    <span class='kw'>else</span>
      <span class='const'><span class='object_link'><a href="../../top-level-namespace.html#Log-constant" title="Log (constant)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid___method__'>__method__</span><span class='embexpr_end'>}</span><span class='tstring_content'>: not created: no identifier provided</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_failures'>failures</span> <span class='op'>+=</span> <span class='id identifier rubyid_failed'>failed</span> <span class='kw'>if</span> <span class='id identifier rubyid_failed'>failed</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='ivar'>@record</span>

  <span class='comment'># Ensure that the record indicates the appropriate workflow phase.
</span>  <span class='id identifier rubyid_set_workflow_phase'>set_workflow_phase</span><span class='lparen'>(</span><span class='id identifier rubyid_workflow_phase'>workflow_phase</span><span class='comma'>,</span> <span class='ivar'>@record</span><span class='rparen'>)</span>

  <span class='comment'># Until a record is persisted, the workflow state is held in the variable
</span>  <span class='comment'># defined in the Workflow module.
</span>  <span class='kw'>if</span> <span class='ivar'>@workflow_state</span>
    <span class='id identifier rubyid_persisted'>persisted</span> <span class='op'>=</span> <span class='id identifier rubyid_get_workflow_state'>get_workflow_state</span><span class='lparen'>(</span><span class='ivar'>@record</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='ivar'>@workflow_state</span> <span class='op'>==</span> <span class='id identifier rubyid_persisted'>persisted</span>
      <span class='const'><span class='object_link'><a href="../../top-level-namespace.html#Log-constant" title="Log (constant)">Log</a></span></span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='kw'>do</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>updating workflow state from &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_persisted'>persisted</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; to &#39;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@workflow_state</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_persisted'>persisted</span> <span class='op'>=</span> <span class='id identifier rubyid_set_workflow_state'>set_workflow_state</span><span class='lparen'>(</span><span class='ivar'>@workflow_state</span><span class='comma'>,</span> <span class='ivar'>@record</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='ivar'>@workflow_state</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_persisted'>persisted</span>
  <span class='kw'>end</span>

  <span class='ivar'>@record</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Jan 24 16:48:49 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.2).
</div>

    </div>
  </body>
</html>