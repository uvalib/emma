<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: UploadWorkflow::Single::Create::States
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "UploadWorkflow::Single::Create::States";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../UploadWorkflow.html" title="UploadWorkflow (class)">UploadWorkflow</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Single.html" title="UploadWorkflow::Single (class)">Single</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Create.html" title="UploadWorkflow::Single::Create (class)">Create</a></span></span>
     &raquo; 
    <span class="title">States</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: UploadWorkflow::Single::Create::States
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Actions.html" title="UploadWorkflow::Single::Create::Actions (module)">Actions</a></span>, <span class='object_link'><a href="Events.html" title="UploadWorkflow::Single::Create::Events (module)">Events</a></span>, <span class='object_link'><a href="../States.html" title="UploadWorkflow::Single::States (module)">States</a></span></dd>
  </dl>
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="../Create.html" title="UploadWorkflow::Single::Create (class)">UploadWorkflow::Single::Create</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/upload_workflow/single/create.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Overridden state transition methods specific to single-entry submission.</p>


  </div>
</div>
<div class="tags">
  

</div>


  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../../Errors.html" title="UploadWorkflow::Errors (module)">Errors</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Errors.html#DEFAULT_ERROR_MESSAGE-constant" title="UploadWorkflow::Errors::DEFAULT_ERROR_MESSAGE (constant)">Errors::DEFAULT_ERROR_MESSAGE</a></span>, <span class='object_link'><a href="../../Errors.html#INTERNAL_EXCEPTION-constant" title="UploadWorkflow::Errors::INTERNAL_EXCEPTION (constant)">Errors::INTERNAL_EXCEPTION</a></span>, <span class='object_link'><a href="../../Errors.html#UPLOAD_ERROR-constant" title="UploadWorkflow::Errors::UPLOAD_ERROR (constant)">Errors::UPLOAD_ERROR</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../../Errors/RenderMethods.html" title="UploadWorkflow::Errors::RenderMethods (module)">Errors::RenderMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Errors/RenderMethods.html#DEFAULT_LABEL-constant" title="UploadWorkflow::Errors::RenderMethods::DEFAULT_LABEL (constant)">Errors::RenderMethods::DEFAULT_LABEL</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html" title="Emma::Debug::FormatMethods (module)">Emma::Debug::FormatMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#DEBUG_INSPECT_COMMON-constant" title="Emma::Debug::FormatMethods::DEBUG_INSPECT_COMMON (constant)">Emma::Debug::FormatMethods::DEBUG_INSPECT_COMMON</a></span>, <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#DEBUG_INSPECT_MAX-constant" title="Emma::Debug::FormatMethods::DEBUG_INSPECT_MAX (constant)">Emma::Debug::FormatMethods::DEBUG_INSPECT_MAX</a></span>, <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#DEBUG_INSPECT_OMISSION-constant" title="Emma::Debug::FormatMethods::DEBUG_INSPECT_OMISSION (constant)">Emma::Debug::FormatMethods::DEBUG_INSPECT_OMISSION</a></span>, <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#DEBUG_SEPARATOR-constant" title="Emma::Debug::FormatMethods::DEBUG_SEPARATOR (constant)">Emma::Debug::FormatMethods::DEBUG_SEPARATOR</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../../../Emma/Common.html" title="Emma::Common (module)">Emma::Common</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../../Emma/Common.html#BOOLEAN_VALUES-constant" title="Emma::Common::BOOLEAN_VALUES (constant)">Emma::Common::BOOLEAN_VALUES</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#HTML_QUOTES-constant" title="Emma::Common::HTML_QUOTES (constant)">Emma::Common::HTML_QUOTES</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#INFLECT_PLURAL-constant" title="Emma::Common::INFLECT_PLURAL (constant)">Emma::Common::INFLECT_PLURAL</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#INFLECT_SINGULAR-constant" title="Emma::Common::INFLECT_SINGULAR (constant)">Emma::Common::INFLECT_SINGULAR</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#LIST_SEPARATOR-constant" title="Emma::Common::LIST_SEPARATOR (constant)">Emma::Common::LIST_SEPARATOR</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#PAIR_SEPARATOR-constant" title="Emma::Common::PAIR_SEPARATOR (constant)">Emma::Common::PAIR_SEPARATOR</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#QUOTE_MARKS-constant" title="Emma::Common::QUOTE_MARKS (constant)">Emma::Common::QUOTE_MARKS</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../../Properties.html" title="UploadWorkflow::Properties (module)">Properties</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Properties.html#BATCH_SIZE-constant" title="UploadWorkflow::Properties::BATCH_SIZE (constant)">Properties::BATCH_SIZE</a></span>, <span class='object_link'><a href="../../Properties.html#BATCH_SIZE_DEFAULT-constant" title="UploadWorkflow::Properties::BATCH_SIZE_DEFAULT (constant)">Properties::BATCH_SIZE_DEFAULT</a></span>, <span class='object_link'><a href="../../Properties.html#DEV_TITLE_PREFIX-constant" title="UploadWorkflow::Properties::DEV_TITLE_PREFIX (constant)">Properties::DEV_TITLE_PREFIX</a></span>, <span class='object_link'><a href="../../Properties.html#EMERGENCY_DELETE_DEFAULT-constant" title="UploadWorkflow::Properties::EMERGENCY_DELETE_DEFAULT (constant)">Properties::EMERGENCY_DELETE_DEFAULT</a></span>, <span class='object_link'><a href="../../Properties.html#FORCE_DELETE_DEFAULT-constant" title="UploadWorkflow::Properties::FORCE_DELETE_DEFAULT (constant)">Properties::FORCE_DELETE_DEFAULT</a></span>, <span class='object_link'><a href="../../Properties.html#INGEST_MAX_SIZE-constant" title="UploadWorkflow::Properties::INGEST_MAX_SIZE (constant)">Properties::INGEST_MAX_SIZE</a></span>, <span class='object_link'><a href="../../Properties.html#MAX_BATCH_SIZE-constant" title="UploadWorkflow::Properties::MAX_BATCH_SIZE (constant)">Properties::MAX_BATCH_SIZE</a></span>, <span class='object_link'><a href="../../Properties.html#REPO_CREATE_DEFAULT-constant" title="UploadWorkflow::Properties::REPO_CREATE_DEFAULT (constant)">Properties::REPO_CREATE_DEFAULT</a></span>, <span class='object_link'><a href="../../Properties.html#REPO_EDIT_DEFAULT-constant" title="UploadWorkflow::Properties::REPO_EDIT_DEFAULT (constant)">Properties::REPO_EDIT_DEFAULT</a></span>, <span class='object_link'><a href="../../Properties.html#REPO_REMOVE_DEFAULT-constant" title="UploadWorkflow::Properties::REPO_REMOVE_DEFAULT (constant)">Properties::REPO_REMOVE_DEFAULT</a></span>, <span class='object_link'><a href="../../Properties.html#THROTTLE_PAUSE-constant" title="UploadWorkflow::Properties::THROTTLE_PAUSE (constant)">Properties::THROTTLE_PAUSE</a></span>, <span class='object_link'><a href="../../Properties.html#TITLE_PREFIX-constant" title="UploadWorkflow::Properties::TITLE_PREFIX (constant)">Properties::TITLE_PREFIX</a></span>, <span class='object_link'><a href="../../Properties.html#TRUNCATE_DELETE_DEFAULT-constant" title="UploadWorkflow::Properties::TRUNCATE_DELETE_DEFAULT (constant)">Properties::TRUNCATE_DELETE_DEFAULT</a></span>, <span class='object_link'><a href="../../Properties.html#WF_URL_PARAMETER-constant" title="UploadWorkflow::Properties::WF_URL_PARAMETER (constant)">Properties::WF_URL_PARAMETER</a></span></p>

  
  
  <h3 class="inherited">Constants included
     from <span class='object_link'><a href="../../External.html" title="UploadWorkflow::External (module)">External</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../External.html#DISABLE_UPLOAD_INDEX_UPDATE-constant" title="UploadWorkflow::External::DISABLE_UPLOAD_INDEX_UPDATE (constant)">External::DISABLE_UPLOAD_INDEX_UPDATE</a></span>, <span class='object_link'><a href="../../External.html#REPO_FAILURE-constant" title="UploadWorkflow::External::REPO_FAILURE (constant)">External::REPO_FAILURE</a></span></p>




  <h2>Instance Attribute Summary</h2>
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="../Simulation.html" title="UploadWorkflow::Single::Simulation (module)">Simulation</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Simulation.html#submission-instance_method" title="UploadWorkflow::Single::Simulation#submission (method)">#submission</a></span></p>

  
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="../Data.html" title="UploadWorkflow::Single::Data (module)">Data</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Data.html#record-instance_method" title="UploadWorkflow::Single::Data#record (method)">#record</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_creating_entry-instance_method" title="#on_creating_entry (instance method)">#<strong>on_creating_entry</strong>(state, event, *event_args)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Upon entering the :creating state:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_submitted_entry-instance_method" title="#on_submitted_entry (instance method)">#<strong>on_submitted_entry</strong>(state, event, *event_args)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Upon entering the :submitted state:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_submitting_entry-instance_method" title="#on_submitting_entry (instance method)">#<strong>on_submitting_entry</strong>(state, event, *event_args)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Upon entering the :submitting state:.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_validating_entry-instance_method" title="#on_validating_entry (instance method)">#<strong>on_validating_entry</strong>(state, event, *event_args)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Upon entering the :validating state:.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Actions.html" title="UploadWorkflow::Single::Create::Actions (module)">Actions</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Actions.html#wf_cancel_submission-instance_method" title="UploadWorkflow::Single::Create::Actions#wf_cancel_submission (method)">#wf_cancel_submission</a></span>, <span class='object_link'><a href="Actions.html#wf_finalize_submission-instance_method" title="UploadWorkflow::Single::Create::Actions#wf_finalize_submission (method)">#wf_finalize_submission</a></span>, <span class='object_link'><a href="Actions.html#wf_index_update-instance_method" title="UploadWorkflow::Single::Create::Actions#wf_index_update (method)">#wf_index_update</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Simulation.html" title="UploadWorkflow::Single::Simulation (module)">Simulation</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Simulation.html#set_submission-instance_method" title="UploadWorkflow::Single::Simulation#set_submission (method)">#set_submission</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../Errors.html" title="UploadWorkflow::Errors (module)">Errors</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Errors.html#failure-instance_method" title="UploadWorkflow::Errors#failure (method)">#failure</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../Errors/RenderMethods.html" title="UploadWorkflow::Errors::RenderMethods (module)">Errors::RenderMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Errors/RenderMethods.html#make_label-instance_method" title="UploadWorkflow::Errors::RenderMethods#make_label (method)">#make_label</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../../Emma/Debug.html" title="Emma::Debug (module)">Emma::Debug</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../../Emma/Debug.html#included-class_method" title="Emma::Debug.included (method)">included</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../../Emma/Debug/OutputMethods.html" title="Emma::Debug::OutputMethods (module)">Emma::Debug::OutputMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../../Emma/Debug/OutputMethods.html#__debug_exception-instance_method" title="Emma::Debug::OutputMethods#__debug_exception (method)">#__debug_exception</a></span>, <span class='object_link'><a href="../../../Emma/Debug/OutputMethods.html#__debug_items-instance_method" title="Emma::Debug::OutputMethods#__debug_items (method)">#__debug_items</a></span>, <span class='object_link'><a href="../../../Emma/Debug/OutputMethods.html#__debug_line-instance_method" title="Emma::Debug::OutputMethods#__debug_line (method)">#__debug_line</a></span>, <span class='object_link'><a href="../../../Emma/Debug/OutputMethods.html#__debug_request-instance_method" title="Emma::Debug::OutputMethods#__debug_request (method)">#__debug_request</a></span>, <span class='object_link'><a href="../../../Emma/Debug/OutputMethods.html#__debug_route-instance_method" title="Emma::Debug::OutputMethods#__debug_route (method)">#__debug_route</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html" title="Emma::Debug::FormatMethods (module)">Emma::Debug::FormatMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#__debug_env_hash-instance_method" title="Emma::Debug::FormatMethods#__debug_env_hash (method)">#__debug_env_hash</a></span>, <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#__debug_header_hash-instance_method" title="Emma::Debug::FormatMethods#__debug_header_hash (method)">#__debug_header_hash</a></span>, <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#__debug_inspect-instance_method" title="Emma::Debug::FormatMethods#__debug_inspect (method)">#__debug_inspect</a></span>, <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#__debug_inspect_item-instance_method" title="Emma::Debug::FormatMethods#__debug_inspect_item (method)">#__debug_inspect_item</a></span>, <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#__debug_inspect_items-instance_method" title="Emma::Debug::FormatMethods#__debug_inspect_items (method)">#__debug_inspect_items</a></span>, <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#__debug_label-instance_method" title="Emma::Debug::FormatMethods#__debug_label (method)">#__debug_label</a></span>, <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#__debug_route_label-instance_method" title="Emma::Debug::FormatMethods#__debug_route_label (method)">#__debug_route_label</a></span>, <span class='object_link'><a href="../../../Emma/Debug/FormatMethods.html#__debug_session_hash-instance_method" title="Emma::Debug::FormatMethods#__debug_session_hash (method)">#__debug_session_hash</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../../Emma/Common.html" title="Emma::Common (module)">Emma::Common</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../../Emma/Common.html#array_string-instance_method" title="Emma::Common#array_string (method)">#array_string</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#boolean%3F-instance_method" title="Emma::Common#boolean? (method)">#boolean?</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#build_query_options-instance_method" title="Emma::Common#build_query_options (method)">#build_query_options</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#calling_method-instance_method" title="Emma::Common#calling_method (method)">#calling_method</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#digits_only%3F-instance_method" title="Emma::Common#digits_only? (method)">#digits_only?</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#get_method-instance_method" title="Emma::Common#get_method (method)">#get_method</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#get_params-instance_method" title="Emma::Common#get_params (method)">#get_params</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#hash_string-instance_method" title="Emma::Common#hash_string (method)">#hash_string</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#html_id-instance_method" title="Emma::Common#html_id (method)">#html_id</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#inflection-instance_method" title="Emma::Common#inflection (method)">#inflection</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#labelize-instance_method" title="Emma::Common#labelize (method)">#labelize</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#make_path-instance_method" title="Emma::Common#make_path (method)">#make_path</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#named_format_references-instance_method" title="Emma::Common#named_format_references (method)">#named_format_references</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#non_breaking-instance_method" title="Emma::Common#non_breaking (method)">#non_breaking</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#non_negative-instance_method" title="Emma::Common#non_negative (method)">#non_negative</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#normalized_list-instance_method" title="Emma::Common#normalized_list (method)">#normalized_list</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#partition_options-instance_method" title="Emma::Common#partition_options (method)">#partition_options</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#positive-instance_method" title="Emma::Common#positive (method)">#positive</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#quote-instance_method" title="Emma::Common#quote (method)">#quote</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#reject_blanks-instance_method" title="Emma::Common#reject_blanks (method)">#reject_blanks</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#sanitized_string-instance_method" title="Emma::Common#sanitized_string (method)">#sanitized_string</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#strip_quotes-instance_method" title="Emma::Common#strip_quotes (method)">#strip_quotes</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#url_escape-instance_method" title="Emma::Common#url_escape (method)">#url_escape</a></span>, <span class='object_link'><a href="../../../Emma/Common.html#url_query-instance_method" title="Emma::Common#url_query (method)">#url_query</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../Properties.html" title="UploadWorkflow::Properties (module)">Properties</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Properties.html#batch_size-instance_method" title="UploadWorkflow::Properties#batch_size (method)">#batch_size</a></span>, <span class='object_link'><a href="../../Properties.html#emergency_delete-instance_method" title="UploadWorkflow::Properties#emergency_delete (method)">#emergency_delete</a></span>, <span class='object_link'><a href="../../Properties.html#force_delete-instance_method" title="UploadWorkflow::Properties#force_delete (method)">#force_delete</a></span>, <span class='object_link'><a href="../../Properties.html#repo_create-instance_method" title="UploadWorkflow::Properties#repo_create (method)">#repo_create</a></span>, <span class='object_link'><a href="../../Properties.html#repo_edit-instance_method" title="UploadWorkflow::Properties#repo_edit (method)">#repo_edit</a></span>, <span class='object_link'><a href="../../Properties.html#repo_remove-instance_method" title="UploadWorkflow::Properties#repo_remove (method)">#repo_remove</a></span>, <span class='object_link'><a href="../../Properties.html#title_prefix-instance_method" title="UploadWorkflow::Properties#title_prefix (method)">#title_prefix</a></span>, <span class='object_link'><a href="../../Properties.html#truncate_delete-instance_method" title="UploadWorkflow::Properties#truncate_delete (method)">#truncate_delete</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../External.html" title="UploadWorkflow::External (module)">External</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../External.html#add_to_index-instance_method" title="UploadWorkflow::External#add_to_index (method)">#add_to_index</a></span>, <span class='object_link'><a href="../../External.html#aws_api-instance_method" title="UploadWorkflow::External#aws_api (method)">#aws_api</a></span>, <span class='object_link'><a href="../../External.html#batch_repository_remove-instance_method" title="UploadWorkflow::External#batch_repository_remove (method)">#batch_repository_remove</a></span>, <span class='object_link'><a href="../../External.html#batch_repository_request-instance_method" title="UploadWorkflow::External#batch_repository_request (method)">#batch_repository_request</a></span>, <span class='object_link'><a href="../../External.html#db_delete-instance_method" title="UploadWorkflow::External#db_delete (method)">#db_delete</a></span>, <span class='object_link'><a href="../../External.html#db_insert-instance_method" title="UploadWorkflow::External#db_insert (method)">#db_insert</a></span>, <span class='object_link'><a href="../../External.html#db_update-instance_method" title="UploadWorkflow::External#db_update (method)">#db_update</a></span>, <span class='object_link'><a href="../../External.html#emma_item%3F-instance_method" title="UploadWorkflow::External#emma_item? (method)">#emma_item?</a></span>, <span class='object_link'><a href="../../External.html#find_records-instance_method" title="UploadWorkflow::External#find_records (method)">#find_records</a></span>, <span class='object_link'><a href="../../External.html#get_record-instance_method" title="UploadWorkflow::External#get_record (method)">#get_record</a></span>, <span class='object_link'><a href="../../External.html#identifier-instance_method" title="UploadWorkflow::External#identifier (method)">#identifier</a></span>, <span class='object_link'><a href="../../External.html#identifiers-instance_method" title="UploadWorkflow::External#identifiers (method)">#identifiers</a></span>, <span class='object_link'><a href="../../External.html#ingest_api-instance_method" title="UploadWorkflow::External#ingest_api (method)">#ingest_api</a></span>, <span class='object_link'><a href="../../External.html#new_record-instance_method" title="UploadWorkflow::External#new_record (method)">#new_record</a></span>, <span class='object_link'><a href="../../External.html#remove_from_index-instance_method" title="UploadWorkflow::External#remove_from_index (method)">#remove_from_index</a></span>, <span class='object_link'><a href="../../External.html#repository_create-instance_method" title="UploadWorkflow::External#repository_create (method)">#repository_create</a></span>, <span class='object_link'><a href="../../External.html#repository_edit-instance_method" title="UploadWorkflow::External#repository_edit (method)">#repository_edit</a></span>, <span class='object_link'><a href="../../External.html#repository_remove-instance_method" title="UploadWorkflow::External#repository_remove (method)">#repository_remove</a></span>, <span class='object_link'><a href="../../External.html#skip_index_ingest-instance_method" title="UploadWorkflow::External#skip_index_ingest (method)">#skip_index_ingest</a></span>, <span class='object_link'><a href="../../External.html#update_in_index-instance_method" title="UploadWorkflow::External#update_in_index (method)">#update_in_index</a></span>, <span class='object_link'><a href="../../External.html#upload_create-instance_method" title="UploadWorkflow::External#upload_create (method)">#upload_create</a></span>, <span class='object_link'><a href="../../External.html#upload_edit-instance_method" title="UploadWorkflow::External#upload_edit (method)">#upload_edit</a></span>, <span class='object_link'><a href="../../External.html#upload_remove-instance_method" title="UploadWorkflow::External#upload_remove (method)">#upload_remove</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Data.html" title="UploadWorkflow::Single::Data (module)">Data</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Data.html#complete%3F-instance_method" title="UploadWorkflow::Single::Data#complete? (method)">#complete?</a></span>, <span class='object_link'><a href="../Data.html#create_record-instance_method" title="UploadWorkflow::Single::Data#create_record (method)">#create_record</a></span>, <span class='object_link'><a href="../Data.html#empty%3F-instance_method" title="UploadWorkflow::Single::Data#empty? (method)">#empty?</a></span>, <span class='object_link'><a href="../Data.html#existing_record-instance_method" title="UploadWorkflow::Single::Data#existing_record (method)">#existing_record</a></span>, <span class='object_link'><a href="../Data.html#file_valid%3F-instance_method" title="UploadWorkflow::Single::Data#file_valid? (method)">#file_valid?</a></span>, <span class='object_link'><a href="../Data.html#metadata_valid%3F-instance_method" title="UploadWorkflow::Single::Data#metadata_valid? (method)">#metadata_valid?</a></span>, <span class='object_link'><a href="../Data.html#reset_record-instance_method" title="UploadWorkflow::Single::Data#reset_record (method)">#reset_record</a></span>, <span class='object_link'><a href="../Data.html#results-instance_method" title="UploadWorkflow::Single::Data#results (method)">#results</a></span>, <span class='object_link'><a href="../Data.html#set_data-instance_method" title="UploadWorkflow::Single::Data#set_data (method)">#set_data</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../../Emma/Json.html" title="Emma::Json (module)">Emma::Json</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../../Emma/Json.html#json_parse-instance_method" title="Emma::Json#json_parse (method)">#json_parse</a></span>, <span class='object_link'><a href="../../../Emma/Json.html#pretty_json-instance_method" title="Emma::Json#pretty_json (method)">#pretty_json</a></span>, <span class='object_link'><a href="../../../Emma/Json.html#safe_json_parse-instance_method" title="Emma::Json#safe_json_parse (method)">#safe_json_parse</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Actions.html" title="UploadWorkflow::Single::Actions (module)">Actions</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Actions.html#wf_cancel_submission-instance_method" title="UploadWorkflow::Single::Actions#wf_cancel_submission (method)">#wf_cancel_submission</a></span>, <span class='object_link'><a href="../Actions.html#wf_check_status-instance_method" title="UploadWorkflow::Single::Actions#wf_check_status (method)">#wf_check_status</a></span>, <span class='object_link'><a href="../Actions.html#wf_finalize_submission-instance_method" title="UploadWorkflow::Single::Actions#wf_finalize_submission (method)">#wf_finalize_submission</a></span>, <span class='object_link'><a href="../Actions.html#wf_index_update-instance_method" title="UploadWorkflow::Single::Actions#wf_index_update (method)">#wf_index_update</a></span>, <span class='object_link'><a href="../Actions.html#wf_list_items-instance_method" title="UploadWorkflow::Single::Actions#wf_list_items (method)">#wf_list_items</a></span>, <span class='object_link'><a href="../Actions.html#wf_remove_items-instance_method" title="UploadWorkflow::Single::Actions#wf_remove_items (method)">#wf_remove_items</a></span>, <span class='object_link'><a href="../Actions.html#wf_start_submission-instance_method" title="UploadWorkflow::Single::Actions#wf_start_submission (method)">#wf_start_submission</a></span>, <span class='object_link'><a href="../Actions.html#wf_upload_file-instance_method" title="UploadWorkflow::Single::Actions#wf_upload_file (method)">#wf_upload_file</a></span>, <span class='object_link'><a href="../Actions.html#wf_validate_submission-instance_method" title="UploadWorkflow::Single::Actions#wf_validate_submission (method)">#wf_validate_submission</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../Actions.html" title="UploadWorkflow::Actions (module)">Actions</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../Actions.html#wf_cancel_submission-instance_method" title="UploadWorkflow::Actions#wf_cancel_submission (method)">#wf_cancel_submission</a></span>, <span class='object_link'><a href="../../Actions.html#wf_finalize_submission-instance_method" title="UploadWorkflow::Actions#wf_finalize_submission (method)">#wf_finalize_submission</a></span>, <span class='object_link'><a href="../../Actions.html#wf_index_update-instance_method" title="UploadWorkflow::Actions#wf_index_update (method)">#wf_index_update</a></span>, <span class='object_link'><a href="../../Actions.html#wf_list_items-instance_method" title="UploadWorkflow::Actions#wf_list_items (method)">#wf_list_items</a></span>, <span class='object_link'><a href="../../Actions.html#wf_remove_items-instance_method" title="UploadWorkflow::Actions#wf_remove_items (method)">#wf_remove_items</a></span>, <span class='object_link'><a href="../../Actions.html#wf_start_submission-instance_method" title="UploadWorkflow::Actions#wf_start_submission (method)">#wf_start_submission</a></span>, <span class='object_link'><a href="../../Actions.html#wf_validate_submission-instance_method" title="UploadWorkflow::Actions#wf_validate_submission (method)">#wf_validate_submission</a></span></p>

  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../States.html" title="UploadWorkflow::Single::States (module)">States</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../States.html#on_approved_entry-instance_method" title="UploadWorkflow::Single::States#on_approved_entry (method)">#on_approved_entry</a></span>, <span class='object_link'><a href="../States.html#on_assigned_entry-instance_method" title="UploadWorkflow::Single::States#on_assigned_entry (method)">#on_assigned_entry</a></span>, <span class='object_link'><a href="../States.html#on_assigned_exit-instance_method" title="UploadWorkflow::Single::States#on_assigned_exit (method)">#on_assigned_exit</a></span>, <span class='object_link'><a href="../States.html#on_assigning_entry-instance_method" title="UploadWorkflow::Single::States#on_assigning_entry (method)">#on_assigning_entry</a></span>, <span class='object_link'><a href="../States.html#on_canceled_entry-instance_method" title="UploadWorkflow::Single::States#on_canceled_entry (method)">#on_canceled_entry</a></span>, <span class='object_link'><a href="../States.html#on_completed_entry-instance_method" title="UploadWorkflow::Single::States#on_completed_entry (method)">#on_completed_entry</a></span>, <span class='object_link'><a href="../States.html#on_failed_entry-instance_method" title="UploadWorkflow::Single::States#on_failed_entry (method)">#on_failed_entry</a></span>, <span class='object_link'><a href="../States.html#on_holding_entry-instance_method" title="UploadWorkflow::Single::States#on_holding_entry (method)">#on_holding_entry</a></span>, <span class='object_link'><a href="../States.html#on_indexed_entry-instance_method" title="UploadWorkflow::Single::States#on_indexed_entry (method)">#on_indexed_entry</a></span>, <span class='object_link'><a href="../States.html#on_indexing_entry-instance_method" title="UploadWorkflow::Single::States#on_indexing_entry (method)">#on_indexing_entry</a></span>, <span class='object_link'><a href="../States.html#on_purged_entry-instance_method" title="UploadWorkflow::Single::States#on_purged_entry (method)">#on_purged_entry</a></span>, <span class='object_link'><a href="../States.html#on_rejected_entry-instance_method" title="UploadWorkflow::Single::States#on_rejected_entry (method)">#on_rejected_entry</a></span>, <span class='object_link'><a href="../States.html#on_resuming_entry-instance_method" title="UploadWorkflow::Single::States#on_resuming_entry (method)">#on_resuming_entry</a></span>, <span class='object_link'><a href="../States.html#on_retrieved_entry-instance_method" title="UploadWorkflow::Single::States#on_retrieved_entry (method)">#on_retrieved_entry</a></span>, <span class='object_link'><a href="../States.html#on_reviewing_entry-instance_method" title="UploadWorkflow::Single::States#on_reviewing_entry (method)">#on_reviewing_entry</a></span>, <span class='object_link'><a href="../States.html#on_scheduling_entry-instance_method" title="UploadWorkflow::Single::States#on_scheduling_entry (method)">#on_scheduling_entry</a></span>, <span class='object_link'><a href="../States.html#on_staging_entry-instance_method" title="UploadWorkflow::Single::States#on_staging_entry (method)">#on_staging_entry</a></span>, <span class='object_link'><a href="../States.html#on_starting_entry-instance_method" title="UploadWorkflow::Single::States#on_starting_entry (method)">#on_starting_entry</a></span>, <span class='object_link'><a href="../States.html#on_starting_exit-instance_method" title="UploadWorkflow::Single::States#on_starting_exit (method)">#on_starting_exit</a></span>, <span class='object_link'><a href="../States.html#on_suspended_entry-instance_method" title="UploadWorkflow::Single::States#on_suspended_entry (method)">#on_suspended_entry</a></span>, <span class='object_link'><a href="../States.html#on_unretrieved_entry-instance_method" title="UploadWorkflow::Single::States#on_unretrieved_entry (method)">#on_unretrieved_entry</a></span></p>

  
  
  
  
  
  
  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="on_creating_entry-instance_method">
  
    #<strong>on_creating_entry</strong>(state, event, *event_args)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Upon entering the :creating state:</p>

<p>The user is presented with the form for submitting a new item.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>state</span>
      
      
        <span class='type'>(<tt>Workflow::State</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>State that is being entered.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Triggering event</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event_args</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Return <strong>self</strong> for chaining.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single/create.rb', line 157</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_creating_entry'>on_creating_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_event_args'>event_args</span><span class='rparen'>)</span>
  <span class='kw'>super</span>

  <span class='comment'># TODO: simulation - remove
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_simulating'>simulating</span>
    <span class='id identifier rubyid_action'>action</span> <span class='op'>=</span>
      <span class='kw'>case</span> <span class='id identifier rubyid_existing_record'>existing_record</span>
        <span class='kw'>when</span> <span class='kw'>false</span> <span class='kw'>then</span> <span class='symbol'>:set_record</span>
        <span class='kw'>when</span> <span class='kw'>true</span>  <span class='kw'>then</span> <span class='symbol'>:reset_record</span>
        <span class='kw'>else</span>            <span class='symbol'>:create_record</span>
      <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:create_record</span>
      <span class='comment'># From UploadController#new:
</span>      <span class='comment'># @item = new_record(user_id: @user.id, base_url: request.base_url)
</span>      <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CODE</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
        <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>user_id: @user.id, base_url: request.base_url</span><span class='tstring_end'>&#39;</span></span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@item = new_record(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_args'>args</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_set_item'>set_item</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_action'>action</span> <span class='op'>=</span> <span class='symbol'>:set_record</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_action'>action</span> <span class='op'>=</span> <span class='symbol'>:create_record</span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_simulating'>simulating</span>
    <span class='id identifier rubyid_wf_start_submission'>wf_start_submission</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_event_args'>event_args</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># TODO: simulation - remove
</span>  <span class='id identifier rubyid___debug_sim'>__debug_sim</span> <span class='kw'>do</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_action'>action</span>
      <span class='kw'>when</span> <span class='symbol'>:set_record</span>   <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Form error message displayed if present.</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>when</span> <span class='symbol'>:reset_record</span> <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>New-item form emptied after cancel.</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>else</span>                    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>System presents a new-item submission form.</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># TODO: simulation - remove
</span>  <span class='id identifier rubyid_commit'>commit</span> <span class='op'>=</span> <span class='id identifier rubyid_file_valid?'>file_valid?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>submit</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>upload</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>USER fills form until submit is enabled.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>USER must `cancel!` or `</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_commit'>commit</span><span class='embexpr_end'>}</span><span class='tstring_content'>!` to advance...</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_submitted_entry-instance_method">
  
    #<strong>on_submitted_entry</strong>(state, event, *event_args)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Upon entering the :submitted state:</p>

<p>The submission is moving into the submission queue.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>state</span>
      
      
        <span class='type'>(<tt>Workflow::State</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>State that is being entered.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Triggering event</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event_args</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Return <strong>self</strong> for chaining.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single/create.rb', line 337</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_submitted_entry'>on_submitted_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_event_args'>event_args</span><span class='rparen'>)</span>
  <span class='kw'>super</span>

  <span class='comment'># TODO: simulation - remove
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_simulating'>simulating</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[no_review: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_no_review'>no_review</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_must_review'>must_review</span> <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_no_review'>no_review</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_must_review'>must_review</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>

  <span class='comment'># Determine whether the item needs to be reviewed.
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_simulating'>simulating</span>
    <span class='id identifier rubyid_must_review'>must_review</span> <span class='op'>=</span> <span class='id identifier rubyid_record'>record</span><span class='period'>.</span><span class='id identifier rubyid_review_required?'>review_required?</span> <span class='kw'>if</span> <span class='id identifier rubyid_record'>record</span>
  <span class='kw'>end</span>

  <span class='comment'># TODO: simulation - remove
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_must_review'>must_review</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This item requires review.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This item can be submitted without review.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Automatically transition to the next state based on submission status.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_must_review'>must_review</span>
    <span class='id identifier rubyid_schedule!'>schedule!</span> <span class='comment'># NOTE: =&gt; :scheduling
</span>  <span class='kw'>else</span>
    <span class='id identifier rubyid_advance!'>advance!</span>  <span class='comment'># NOTE: =&gt; :staging
</span>  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_submitting_entry-instance_method">
  
    #<strong>on_submitting_entry</strong>(state, event, *event_args)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Upon entering the :submitting state:</p>

<p>The submission is complete and ready to move into the submission queue.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>state</span>
      
      
        <span class='type'>(<tt>Workflow::State</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>State that is being entered.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Triggering event</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event_args</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Return <strong>self</strong> for chaining.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single/create.rb', line 271</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_submitting_entry'>on_submitting_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_event_args'>event_args</span><span class='rparen'>)</span>
  <span class='kw'>super</span>

  <span class='comment'># Verify validity of the submission. # TODO: simulation - remove
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_simulating'>simulating</span>
    <span class='comment'># From UploadController#create:
</span>    <span class='comment'># @item, failed = upload_create(data)
</span>    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CODE</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>data=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_data'>data</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_opt'>opt</span>  <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>index: false</span><span class='tstring_end'>&#39;</span></span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@item, failed = upload_create(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_args'>args</span><span class='embexpr_end'>}</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_opt'>opt</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_bad'>bad</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_db_fail'>db_fail</span> <span class='op'>=</span> <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_db_failure'>db_failure</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_failures'>failures</span>  <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DB create failed</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_bad'>bad</span> <span class='op'>=</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_metadata_valid'>metadata_valid</span> <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_invalid_entry'>invalid_entry</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_failures'>failures</span>  <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bad metadata</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>else</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_succeeded'>succeeded</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_db_fail'>db_fail</span>
      <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[db_failure: true]</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The database entry could not be created.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_bad'>bad</span>
      <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[invalid_entry: true]</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The entry is invalid/incomplete.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>(NOTE: PROBABLE FAILURE OF CLIENT-SIDE FORM VALIDATION)</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[invalid_entry: false]</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[db_failure:    false]</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Verify validity of the submission.
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_simulating'>simulating</span>
    <span class='id identifier rubyid_wf_validate_submission'>wf_validate_submission</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_event_args'>event_args</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_valid'>valid</span> <span class='op'>=</span> <span class='id identifier rubyid_ready?'>ready?</span>

  <span class='comment'># TODO: simulation - remove
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_valid'>valid</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The database entry was created.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>System generates a form error message to be displayed.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Automatically transition to the next state based on submission status.
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_valid'>valid</span>
    <span class='id identifier rubyid_advance!'>advance!</span> <span class='comment'># NOTE: =&gt; :submitted
</span>  <span class='kw'>else</span>
    <span class='id identifier rubyid_reject!'>reject!</span>  <span class='comment'># NOTE: =&gt; :creating
</span>  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_validating_entry-instance_method">
  
    #<strong>on_validating_entry</strong>(state, event, *event_args)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Upon entering the :validating state:</p>

<p>The supplied file is being validated.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>state</span>
      
      
        <span class='type'>(<tt>Workflow::State</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>State that is being entered.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Triggering event</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event_args</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Return <strong>self</strong> for chaining.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/upload_workflow/single/create.rb', line 214</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_validating_entry'>on_validating_entry</span><span class='lparen'>(</span><span class='id identifier rubyid_state'>state</span><span class='comma'>,</span> <span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_event_args'>event_args</span><span class='rparen'>)</span>
  <span class='kw'>super</span>

  <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The uploaded file is received in the Shrine cache.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='comment'># Verify validity of the uploaded file. # TODO: simulation - remove
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_simulating'>simulating</span>
    <span class='comment'># From UploadController#endpoint:
</span>    <span class='comment'># stat, hdrs, body = FileUploader.upload_response(:cache, request.env)
</span>    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>CODE</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>:cache, request.env</span><span class='tstring_end'>&#39;</span></span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FileUploader.upload_response(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_args'>args</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[invalid_file: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_invalid_file'>invalid_file</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_file_valid'>file_valid</span> <span class='op'>=</span> <span class='op'>!</span><span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_invalid_file'>invalid_file</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_file_valid'>file_valid</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_succeeded'>succeeded</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_submission'>submission</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
    <span class='kw'>else</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_failures'>failures</span>  <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>invalid file</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Verify validity of the uploaded file.
</span>  <span class='kw'>unless</span> <span class='id identifier rubyid_simulating'>simulating</span>
    <span class='id identifier rubyid_wf_upload_file'>wf_upload_file</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_event_args'>event_args</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_valid'>valid</span> <span class='op'>=</span> <span class='id identifier rubyid_ready?'>ready?</span>

  <span class='comment'># TODO: simulation - remove
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_valid'>valid</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The remediated file was determined to be VALID.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The form is populated with extracted metadata.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>USER continues to fill form until submit is enabled.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>USER must `cancel!` or `submit!` to advance...</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The remediated file was determined to be INVALID.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid___debug_sim'>__debug_sim</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>System generates a form error message to be displayed.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># If the file is valid then the submission remains in this state until
</span>  <span class='comment'># the user completes and submits the form, or cancels the submission.
</span>  <span class='id identifier rubyid_reject!'>reject!</span> <span class='kw'>unless</span> <span class='id identifier rubyid_valid'>valid</span> <span class='comment'># NOTE: =&gt; :creating
</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Feb  6 16:07:28 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.2).
</div>

    </div>
  </body>
</html>